{"version":3,"sources":["webpack:///./src/views/airdrop/index.vue","webpack:///./src/views/airdrop/index.vue?9187","webpack:///./node_modules/.pnpm/core-js@3.24.0/node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/.pnpm/core-js@3.24.0/node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/.pnpm/core-js@3.24.0/node_modules/core-js/internals/engine-is-node.js","webpack:///./src/views/airdrop/index.vue?f08d","webpack:///./node_modules/.pnpm/core-js@3.24.0/node_modules/core-js/internals/array-reduce.js"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","$data","onClick","_hoisted_5","_toDisplayString","_createVNode","_component_el_icon","color","size","_component_caret_bottom","_Transition","name","$options","_hoisted_8","formatEther","_hoisted_11","$event","placeholder","_component_loading","_hoisted_14","symbol","_hoisted_17","formatUnits","balance","decimals","_hoisted_21","_createBlock","_component_el_button","loading","window","Contract","IERC20ABI","airDropOldContract","airDropContract","contractERC20","data","utils","typesShow","type","isLogin","isApprove","approveLoading","loginLoading","feeAmount","BigNumber","from","feeBnBAmount","tokenAddr","disListInfo","airdropLoading","searchLoading","ERC20Info","allowance","computed","disList","list","resList","this","split","i","length","item","arr","push","addr","price","totalPrice","forEach","isNaN","Number","watch","debounce","async","ERC20","$wallet","initContract","Promise","all","balanceOf","wallet","accounts","address","isZero","error","console","created","isLoginFn","on","methods","mapActions","product","SWAP_HELPER","ABI","airDropABI","then","val","callFee","getBnbBalance","provider","getBalance","clickOutside","toggleType","loginHandler","setConnectDialog","bool","dataVerify","res","totalSupply","tx","approve","wait","Tips","addrs","map","e","amounts","parseUnits","toString","totalAmount","reduce","sum","add","log","batchSafeTransferFrom","value","ElNotification","title","message","parseEther","manyTransferETH","status","substr","__exports__","render","fails","module","exports","METHOD_NAME","argument","method","call","$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","callbackfn","arguments","undefined","classof","global","process","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","right"],"mappings":"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","file":"js/chunk-1b4d02ee.7df4ca0e.js","sourcesContent":["<template>\r\n  <div class=\"airdrop\">\r\n    <p class=\"text-22 text-white\">Use SdDrop to airdrop your token to all your users with the cli</p>\r\n    <div class=\"airdrop-content MT-30\">\r\n      <div v-click-outside=\"clickOutside\" class=\"airdrop-type flex-row-between pointer MB-20\" :class=\"{ 'type-show': typesShow }\" @click=\"typesShow = !typesShow\">\r\n        <div class=\"airdrop-type__left text-left\">\r\n          <div class=\"text-18 text-999\">Aindrop Type</div>\r\n          <div class=\"text-22 text-white MT-5\">{{ type == 1 ? 'Aindrop Tokens' : 'BNB' }}</div>\r\n        </div>\r\n        <el-icon color=\"#fff\" :size=\"16\">\r\n          <caret-bottom />\r\n        </el-icon>\r\n        <transition name=\"el-zoom-in-top\">\r\n          <div v-show=\"typesShow\" class=\"airdrop-type__list\">\r\n            <div class=\"airdrop-type__list-item\" @click=\"toggleType(1)\">Aindrop Type</div>\r\n            <div class=\"airdrop-type__list-item\" @click=\"toggleType(2)\">BNB</div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n      <div class=\"airdrop-desc text-left text-20 text-999 MB-20\">\r\n        <div class=\"airdrop-desc__title text-22 text-white MB-10\">Aindrop Instructions:</div>\r\n        <div class=\"MT-5\">- Airdrop tokens to as many users as desired</div>\r\n        <div class=\"MT-5\">- If you are running a sale make sure tokens are not airdropped</div>\r\n        <div class=\"MT-5\">- Enter your token address first</div>\r\n        <div class=\"MT-5\">- Enter a list of users to airdrop followed by amount(comma sepa</div>\r\n      </div>\r\n      <div class=\"text-18 text-999 MB-20\">Airdrop Fees:{{ type == 1 ? utils.formatEther(feeAmount) : utils.formatEther(feeBnBAmount) }} BNB</div>\r\n      <transition name=\"el-zoom-in-top\">\r\n        <div v-show=\"type == 1\" class=\"airdrop-type text-left MB-20\">\r\n          <div class=\"text-18 text-999\">Enter Token Address</div>\r\n          <div class=\"flex-row-start MT-5 align-center\">\r\n            <input v-model.trim=\"tokenAddr\" class=\"airdrop-type__input text-22 text-white flex-1\" placeholder=\"Please Enter Token Address\">\r\n            <el-icon v-show=\"searchLoading\" class=\"is-loading\" color=\"#fff\">\r\n              <loading />\r\n            </el-icon>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n      <div v-show=\"type == 1\" class=\"text-20 text-999 text-left\">\r\n        <span class=\"MR-5\">Token:</span>\r\n        <span class=\"text-red\">{{ ERC20Info.symbol }}({{ ERC20Info.name || '--' }})</span>\r\n      </div>\r\n      <div class=\"text-20 text-999 text-left MT-10\">\r\n        <span class=\"MR-5\">Balance:</span>\r\n        <span v-if=\"type == 1\" class=\"text-red\">{{ utils.formatUnits(ERC20Info.balance, ERC20Info.decimals) }}</span>\r\n        <span v-else class=\"text-red\">{{ utils.formatEther(ERC20Info.balance) }}</span>\r\n      </div>\r\n      <div class=\"airdrop-list MT-20\">\r\n        <textarea v-model.trim=\"disListInfo\" class=\"airdrop-list__textarea text-white text-20\" placeholder=\"Enter Distribution List\" />\r\n      </div>\r\n      <p class=\"text-red text-20 MT-10 MB-30\">For best results we recommend you do a maximum of 500 Addresses at a time!</p>\r\n      <div class=\"text-20 text-999\">\r\n        Total tokens being airdropped:\r\n        <span class=\"text-red\">{{ totalPrice }}</span>\r\n      </div>\r\n      <div class=\"flex-row-center MT-15\">\r\n        <el-button v-if=\"!isLogin\" class=\"btn btn-line color-text MR-20\" :loading=\"loginLoading\" @click=\"loginHandler\">Connect</el-button>\r\n        <el-button v-else-if=\"isApprove == 2\" class=\"btn btn-line color-text MR-20\" :loading=\"approveLoading\" @click=\"approveHandler\">APPROVE</el-button>\r\n        <el-button v-else-if=\"isApprove == 1\" class=\"btn\" :loading=\"airdropLoading\" @click=\"airdropHandler\">AIRDROP</el-button>\r\n        <el-button v-if=\"isApprove == 0 && type == 2\" class=\"btn\" :loading=\"airdropLoading\" @click=\"airdropETHHandler\">AIRDROP</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* global wallet */\r\n// import { CaretBottom, Loading } from '@element-plus/icons'\r\nimport { ElNotification } from 'element-plus'\r\nimport { debounce, Tips } from '@/libs/utils.js'\r\nimport { BigNumber, Contract, utils } from 'ethers'\r\nimport IERC20ABI from '@/api/abis/IERC20.json'\r\nimport ABI from '@/api/abis/SwapHelper.json'\r\nimport airDropABI from '@/api/abis/airDropABI.json'\r\nimport { product } from '@/plugins/wallet/config.json'\r\n\r\nimport { mapActions } from 'vuex'\r\nwindow.Contract = Contract\r\nwindow.IERC20ABI = IERC20ABI\r\nlet airDropContract = null\r\nlet contractERC20 = null\r\nlet airDropOldContract\r\nexport default {\r\n  // components: {\r\n  //   CaretBottom,\r\n  //   Loading\r\n  // },\r\n  data() {\r\n    return {\r\n      utils: utils,\r\n      typesShow: false,\r\n      // 当前选中类型\r\n      type: 1,\r\n      // 是否有登陆\r\n      isLogin: false,\r\n      // 是否有授权 0: 未知 1:已授权 2:未授权\r\n      isApprove: 0,\r\n      // 授权loading\r\n      approveLoading: false,\r\n      // 登陆loading\r\n      loginLoading: false,\r\n      feeAmount: BigNumber.from(0),\r\n      feeBnBAmount: BigNumber.from(0),\r\n      // 合约地址\r\n      tokenAddr: '',\r\n      disListInfo: '',\r\n      // 空投loading\r\n      airdropLoading: false,\r\n      searchLoading: false,\r\n      ERC20Info: {\r\n        name: '',\r\n        symbol: '',\r\n        decimals: 0,\r\n        balance: BigNumber.from(0),\r\n        allowance: BigNumber.from(0)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 格式化列表\r\n    disList() {\r\n      let list = []\r\n      const resList = []\r\n      if (this.disListInfo) {\r\n        list = this.disListInfo.split('\\n')\r\n      }\r\n      for (let i = 0; i < list.length; i++) {\r\n        const item = list[i]\r\n        const arr = item.split(',')\r\n        resList.push({\r\n          addr: arr[0],\r\n          price: arr[1]\r\n        })\r\n      }\r\n      return resList\r\n    },\r\n    // 统计总金额\r\n    totalPrice() {\r\n      let totalPrice = 0\r\n      this.disList.forEach((item) => {\r\n        const price = item.price\r\n        if (price && !isNaN(price)) {\r\n          totalPrice += Number(price)\r\n        }\r\n      })\r\n      return totalPrice\r\n    }\r\n  },\r\n  watch: {\r\n    tokenAddr: debounce(async function() {\r\n      this.searchLoading = true\r\n      // TODO 搜索接口\r\n      try {\r\n        const ERC20 = this.$wallet.initContract(this.tokenAddr, IERC20ABI)\r\n        const [name, symbol, decimals, balance, allowance] = await Promise.all([\r\n          ERC20.name(),\r\n          ERC20.symbol(),\r\n          ERC20.decimals(),\r\n          ERC20.balanceOf(wallet.accounts[0]),\r\n          ERC20.allowance(wallet.accounts[0], airDropOldContract.address)\r\n        ])\r\n        this.ERC20Info = { name, symbol, decimals, balance }\r\n        this.isApprove = allowance.isZero() ? 2 : 1\r\n        contractERC20 = ERC20\r\n      } catch (error) {\r\n        console.error(error)\r\n        this.ERC20Info = {\r\n          name: '',\r\n          symbol: '',\r\n          decimals: 0,\r\n          balance: BigNumber.from(0),\r\n          allowance: BigNumber.from(0)\r\n        }\r\n        this.isApprove = 2\r\n        contractERC20 = null\r\n      }\r\n      this.searchLoading = false\r\n    }, 500)\r\n  },\r\n  created() {\r\n    this.isLoginFn()\r\n    this.$wallet.on('accountChange', () => {\r\n      this.isLoginFn()\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapActions(['setConnectDialog']),\r\n    // 是否登陆\r\n    async isLoginFn() {\r\n      if (this.$wallet.accounts[0]) {\r\n        this.isApprove = 0\r\n        this.isLogin = true\r\n        airDropContract = window.wallet.initContract(product.SWAP_HELPER, ABI)\r\n        airDropOldContract = window.wallet.initContract('0x9b74de695F70F6ecC6A0855b4523db6Fb64243d3', airDropABI)\r\n        airDropOldContract.price().then((val) => {\r\n          this.feeAmount = val\r\n        })\r\n        airDropContract.callFee().then((val) => {\r\n          this.feeBnBAmount = val\r\n        })\r\n      } else {\r\n        this.isLogin = false\r\n      }\r\n    },\r\n    // 获取BNB余额\r\n    getBnbBalance() {\r\n      airDropContract.provider.getBalance(wallet.accounts[0]).then((data) => {\r\n        this.ERC20Info = { name: 'BNB', balance: data }\r\n      })\r\n    },\r\n    clickOutside() {\r\n      this.typesShow = false\r\n    },\r\n    /**\r\n     * 切换类型\r\n     * @param {Number} type 当前选中类型 1:Aindrop Tokens 2:BNB\r\n     */\r\n    toggleType(type) {\r\n      this.type = type\r\n      this.ERC20Info = {\r\n        name: '',\r\n        symbol: '',\r\n        decimals: 0,\r\n        balance: BigNumber.from(0),\r\n        allowance: BigNumber.from(0)\r\n      }\r\n      if (type === 2) {\r\n        this.getBnbBalance()\r\n      }\r\n    },\r\n    // 登陆\r\n    loginHandler() {\r\n      this.setConnectDialog(true)\r\n    },\r\n    // 授权\r\n    async approveHandler() {\r\n      // TODO 授权接口\r\n      const bool = this.dataVerify()\r\n      if (!bool) {\r\n        return\r\n      }\r\n      this.approveLoading = true\r\n      try {\r\n        const res = await contractERC20.totalSupply()\r\n        const tx = await contractERC20.approve(airDropOldContract.address, res)\r\n        await tx.wait()\r\n        this.isApprove = 1\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.approveLoading = false\r\n    },\r\n    // 空投\r\n    async airdropHandler() {\r\n      this.airdropLoading = true\r\n      // TODO 调用空投接口\r\n      try {\r\n        const { address } = contractERC20\r\n        const addrs = this.disList.map((e) => e.addr)\r\n        const amounts = this.disList.map((e) => utils.parseUnits(e.price.toString(), this.ERC20Info.decimals))\r\n        // 初始值是手续费  求和数组\r\n        const totalAmount = amounts.reduce((sum, item) => sum.add(item))\r\n        \r\n        console.log(utils.formatUnits(totalAmount, 18), airDropContract, this.ERC20Info.decimals)\r\n        const tx = await airDropOldContract.batchSafeTransferFrom(address, addrs, amounts, { value: this.feeAmount,  })\r\n        await tx.wait()\r\n        ElNotification({\r\n          type: 'success',\r\n          title: 'Success',\r\n          message: 'Airdrop Success'\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.airdropLoading = false\r\n    },\r\n    // 空投发送BNB\r\n    async airdropETHHandler() {\r\n      this.airdropLoading = true\r\n      // TODO 调用空投接口\r\n      try {\r\n        const addrs = this.disList.map((e) => e.addr)\r\n        const amounts = this.disList.map((e) => utils.parseEther(e.price.toString()))\r\n        // 初始值是手续费  求和数组\r\n        const totalAmount = amounts.reduce((sum, item) => sum.add(item), this.feeBnBAmount)\r\n        const tx = await airDropContract.manyTransferETH(addrs, amounts, { value: totalAmount })\r\n        await tx.wait()\r\n        ElNotification({\r\n          type: 'success',\r\n          title: 'Success',\r\n          message: 'Airdrop Success'\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.airdropLoading = false\r\n    },\r\n    // 授权数据校验\r\n    dataVerify() {\r\n      if (!this.tokenAddr) {\r\n        ElNotification({\r\n          type: 'error',\r\n          title: 'Tips',\r\n          message: 'Please Enter Token Address'\r\n        })\r\n        return false\r\n      }\r\n      if (this.disList.length <= 0) {\r\n        ElNotification({\r\n          type: 'error',\r\n          title: 'Tips',\r\n          message: 'Please Enter Distribution List'\r\n        })\r\n        return false\r\n      }\r\n\r\n      let status = true\r\n      for (let i = 0; i < this.disList.length; i++) {\r\n        const { addr, price } = this.disList[i]\r\n        if (addr.substr(0, 2) !== '0x' || addr.length !== 42 || !price) {\r\n          ElNotification({\r\n            type: 'error',\r\n            title: 'Tips',\r\n            message: `The format of line ${i + 1} is wrong, please check the vehicle`\r\n          })\r\n          status = false\r\n          break\r\n        }\r\n      }\r\n      return status\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.btn {\r\n  height: 38px;\r\n  line-height: 38px;\r\n  font-size: 16px;\r\n  min-height: 0;\r\n  background: linear-gradient(-68deg, #ffd60d, #dff522);\r\n  border-radius: 19px;\r\n  border: none;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  color: #3a382e;\r\n  transition: all 0.3s;\r\n  &.btn-line {\r\n    border: 1px solid #ffd60d;\r\n    background: linear-gradient(-68deg, #978dbe 0%, #ffd60d 0%, #dff522 100%);\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n  &:hover {\r\n    transform: scale(0.95);\r\n    color: #3a382e;\r\n  }\r\n}\r\n\r\n.airdrop {\r\n  width: 95%;\r\n  max-width: 8rem;\r\n  margin: 20px auto;\r\n  text-align: center;\r\n  .airdrop-content {\r\n    width: 100%;\r\n    background: #25241e;\r\n    border-radius: 20px;\r\n    padding: 30px;\r\n    .airdrop-type {\r\n      padding: 5px 15px 7px;\r\n      border: 1px solid rgba(255, 255, 255, 0.42);\r\n      border-radius: 7px;\r\n      position: relative;\r\n      &.type-show {\r\n        border-bottom-color: transparent;\r\n        border-bottom-left-radius: 0;\r\n        border-bottom-right-radius: 0;\r\n      }\r\n      .airdrop-type__input {\r\n        width: 100%;\r\n        background: none;\r\n      }\r\n      .airdrop-type__list {\r\n        position: absolute;\r\n        left: -1px;\r\n        right: -1px;\r\n        top: 100%;\r\n        background: #25241e;\r\n        box-shadow: #393730 0 15px 15px;\r\n        border: 1px solid rgba(255, 255, 255, 0.42);\r\n        border-top: none;\r\n        border-bottom-left-radius: 0.07rem;\r\n        border-bottom-right-radius: 0.07rem;\r\n        .airdrop-type__list-item {\r\n          height: 50px;\r\n          line-height: 50px;\r\n          color: #fff;\r\n          font-size: 16px;\r\n          cursor: pointer;\r\n          transition: all 0.3s;\r\n          text-align: left;\r\n          padding-left: 15px;\r\n          &:hover {\r\n            background: #636259;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .airdrop-list {\r\n      height: 200px;\r\n      border: 1px solid #ffffff;\r\n      border: 1px solid rgba(255, 255, 255, 0.42);\r\n      border-radius: 7px;\r\n      padding: 10px;\r\n      .airdrop-list__textarea {\r\n        width: 100%;\r\n        height: 100%;\r\n        background: none;\r\n        resize: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=49efc99e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=49efc99e&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\coder\\\\2022\\\\tswap\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49efc99e\"]])\n\nexport default __exports__","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/.pnpm/sass-loader@8.0.2_node-sass@4.14.1/node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=49efc99e&lang=scss&scoped=true\"","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}