{"version":3,"sources":["webpack:///./src/assets/images/dor.jpg","webpack:///./src/views/dor/index.vue?57db","webpack:///./src/views/dor/index.vue","webpack:///./src/views/dor/index.vue?fdbf"],"names":["module","exports","class","_createElementVNode","href","target","src","_imports_0","_createElementBlock","_toDisplayString","_ctx","formatUnits","_createBlock","_component_el_icon","_createVNode","_component_Loading","_component_el_button","disabled","loading","onClick","_hoisted_4","data","utils","getBit","isLogin","availableNum","contract","rewardLoading","mounted","this","window","wallet","accounts","loginCallBack","on","methods","mapActions","initContract","product","DOR","DOR_ABI","console","log","available","then","finally","tx","claim","wait","ElNotification","type","title","message","error","Tips","render","__scopeId"],"mappings":"oHAAAA,EAAOC,QAAU,oD,oCCAjB,W,8wKCCOC,MAAM,wB,GACJA,MAAM,W,GAMNA,MAAM,gB,QAGPC,gCAGI,KAHDC,KAAK,4EAA4EC,OAAO,QAAQH,MAAM,2DAAzG,CACIC,gCAAqD,OAAhDG,IAAAC,IAA8BL,MAAM,aACzCC,gCAAiC,OAA5BD,MAAM,QAAO,eAFtB,I,yLAVNM,gCAeM,MAfN,EAeM,CAdJL,gCAKM,MALN,EAKM,8BALe,aACRM,6BAAEC,SAAOA,QAAMC,YAAYD,eAAY,QAAY,IAC5D,GAAkCA,oCAAlCE,yBAEUC,EAAA,C,MAFDX,MAAM,cAAf,C,6BACI,IAAW,CAAXY,yBAAWC,K,OADf,yCAIJZ,gCAOM,MAPN,EAOM,CAN6DO,oCAA/DE,yBAAyII,EAAA,C,MAA9Hd,MAAM,UAAWe,SAAUP,gBAAY,EAAuBQ,QAASR,gBAAgBS,QAAOT,oBAAzG,C,6BAA2H,IAAE,8BAAF,Q,KAA3H,+DACAE,yBAAkFI,EAAA,C,MAAvEd,MAAM,UAAkBiB,QAAK,eAAET,oBAAgB,KAA1D,C,6BAAkE,IAAI,8BAAJ,U,OAClEU,M,6EAiBO,GACXC,OACI,MAAO,CACHC,aACAC,cACAC,SAAS,EACTC,aAAc,EACdC,SAAU,KACVR,SAAS,EACTS,eAAe,IAGvBC,UACIC,KAAKL,UAAUM,OAAOC,OAAOC,SAAS,GACtCH,KAAKL,SAAWK,KAAKI,gBACrBH,OAAOC,OAAOG,GAAG,gBAAiB,KAC9BL,KAAKL,UAAUM,OAAOC,OAAOC,SAAS,GACtCH,KAAKL,SAAWK,KAAKI,mBAG7BE,QAAS,IACFC,eAAW,CAAC,qBACfH,gBACIJ,KAAKH,SAAWI,OAAOC,OAAOM,aAAaC,aAAQC,IAAKC,GACxDC,QAAQC,IAAIb,KAAKH,UACjBG,KAAKX,SAAU,EACfW,KAAKH,SAASiB,UAAU,6CAA6Cb,OAAOC,OAAOC,SAAS,IAAIY,KAAKvB,IACjGQ,KAAKJ,aAAeJ,IACrBwB,QAAQ,KACPhB,KAAKX,SAAU,KAIvB,yBACIW,KAAKF,eAAgB,EACrB,IACI,MAAMmB,QAAWjB,KAAKH,SAASqB,MAAM,oDAC/BD,EAAGE,OACTC,eAAe,CACXC,KAAM,UACNC,MAAO,UACPC,QAAS,WAEf,MAAOC,GACPC,eAAKD,GAEPxB,KAAKF,eAAgB,K,UCrEjC,EAAO4B,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-c74c566a.a401dc83.js","sourcesContent":["module.exports = \"./images/dor6d691649be92cedd27e8f46f98346532.jpg\";","export { default } from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=f1fced50&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=f1fced50&lang=scss&scoped=true\"","<template>\r\n  <div class=\"dor flex-row-between\">\r\n    <div class=\"text-32\">\r\n        可领取DOR数量：{{getBit(utils.formatUnits(availableNum, 18), 5) }}\r\n        <el-icon class=\"is-loading\" v-if=\"loading\">\r\n            <Loading />\r\n        </el-icon>\r\n    </div>\r\n    <div class=\"flex-row-end\">\r\n        <el-button class=\"dor-btn\" :disabled=\"availableNum <= 0\" v-if=\"isLogin\" :loading=\"rewardLoading\" @click=\"availableHandler\">领取</el-button>\r\n        <el-button class=\"dor-btn\" v-else @click=\"setConnectDialog(true)\">链接钱包</el-button>\r\n        <a href=\"/#/swap/Pancake?outputCurrency=0x23766cb8a96ff2f46f664bc7d088a6306de73618\" target=\"_bank\" class=\"flex-column-center align-center buy pointer text-center\">\r\n            <img src=\"@/assets/images/dor.jpg\" class=\"buy-icon\"/>\r\n            <div class=\"MT-5\">Buy Token</div>\r\n        </a>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport { product } from '@/plugins/wallet/config.json'\r\nimport DOR_ABI from '@/api/abis/dor.json'\r\nimport { utils } from 'ethers'\r\nimport { getBit, Tips } from '../../libs/utils'\r\nimport { ElNotification } from 'element-plus'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            utils,\r\n            getBit,\r\n            isLogin: false,\r\n            availableNum: 0,\r\n            contract: null,\r\n            loading: false,\r\n            rewardLoading: false\r\n        }\r\n    },\r\n    mounted() {\r\n        this.isLogin = window.wallet.accounts[0] ? true : false\r\n        this.isLogin && this.loginCallBack()\r\n        window.wallet.on('accountChange', () => {\r\n            this.isLogin = window.wallet.accounts[0] ? true : false\r\n            this.isLogin && this.loginCallBack()\r\n        })\r\n    },\r\n    methods: {\r\n        ...mapActions(['setConnectDialog']),\r\n        loginCallBack() {\r\n            this.contract = window.wallet.initContract(product.DOR, DOR_ABI)\r\n            console.log(this.contract)\r\n            this.loading = true\r\n            this.contract.available('0x23766CB8a96fF2f46F664BC7D088a6306DE73618',window.wallet.accounts[0]).then(data => {\r\n                this.availableNum = data\r\n            }).finally(() => {\r\n                this.loading = false\r\n            })\r\n        },\r\n        // 领取奖励\r\n        async availableHandler() {\r\n            this.rewardLoading = true\r\n            try {\r\n                const tx = await this.contract.claim('0x23766CB8a96fF2f46F664BC7D088a6306DE73618')\r\n                await tx.wait()\r\n                ElNotification({\r\n                    type: 'success',\r\n                    title: 'Success',\r\n                    message: '代币领取成功'\r\n                })   \r\n            } catch (error) {\r\n              Tips(error)  \r\n            }   \r\n            this.rewardLoading = false\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dor{\r\n    width: 600px;\r\n    max-width: 100%;\r\n    margin: 50px auto;\r\n    .dor-btn{\r\n        height: 50px;\r\n        background: #FCBE2F;\r\n        border: 1px solid #2A2A2A;\r\n        border-radius: 8px;\r\n        width: 100px;\r\n        color: #fff;\r\n        &.is-disabled{\r\n        background: #e4e7ed;\r\n        }\r\n    }\r\n}\r\n.buy{\r\n    width: 80px;\r\n    .buy-icon{\r\n        width: 25px;\r\n        height: 25px;\r\n    }\r\n}\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=f1fced50&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=f1fced50&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f1fced50\"\n\nexport default script"],"sourceRoot":""}