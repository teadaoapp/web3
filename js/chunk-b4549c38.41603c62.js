(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4549c38"],{"107f":function(e,t,c){"use strict";c("68c3")},2728:function(e,t,c){"use strict";c.r(t);var a=c("3eb2");const o=e=>(Object(a["pushScopeId"])("data-v-e8f533c6"),e=e(),Object(a["popScopeId"])(),e),i={class:"airdrop"},s=o(()=>Object(a["createElementVNode"])("p",{class:"text-22 text-white"},"使用TeaDrop将您的代币空投给您的所有用户",-1)),n={class:"airdrop-content MT-30"},r={class:"airdrop-type__left text-left"},l=o(()=>Object(a["createElementVNode"])("div",{class:"text-18 text-999"},"空投类型",-1)),d={class:"text-22 text-white MT-5"},p={class:"airdrop-type__list"},b=Object(a["createStaticVNode"])('<div class="airdrop-desc text-left text-20 text-999 MB-20" data-v-e8f533c6><div class="airdrop-desc__title text-22 text-white MB-10" data-v-e8f533c6>空投说明：</div><div class="MT-5" data-v-e8f533c6>- 向任意数量的用户空投代币</div><div class="MT-5" data-v-e8f533c6>- 如果您正在进行销售，请确保代币没有空投</div><div class="MT-5" data-v-e8f533c6>- 先输入你的代币地址</div><div class="MT-5" data-v-e8f533c6>- 输入要空投的用户列表，后跟金额（逗号分隔）</div></div>',1),h={class:"text-18 text-999 MB-20"},f={class:"airdrop-type text-left MB-20"},m=o(()=>Object(a["createElementVNode"])("div",{class:"text-18 text-999"},"请输入令牌地址",-1)),O={class:"flex-row-start MT-5 align-center"},j={class:"text-20 text-999 text-left"},u=o(()=>Object(a["createElementVNode"])("span",{class:"MR-5"},"代币:",-1)),v={class:"text-red"},w={class:"flex-row-between align-center"},g={class:"text-20 text-999 text-left MT-10"},x=o(()=>Object(a["createElementVNode"])("span",{class:"MR-5"},"余额:",-1)),y={key:0,class:"text-red"},E={key:1,class:"text-red"},k={class:"flex-row-end"},N={class:"airdrop-list MT-20"},C=o(()=>Object(a["createElementVNode"])("p",{class:"text-red text-20 MT-10 MB-30"},"为了获得最佳效果，我们建议您一次最多处理500个地址！",-1)),V={class:"text-20 text-999"},L=Object(a["createTextVNode"])(" 空投的代币总数: "),T={class:"text-red"},B={class:"flex-row-center MT-15"},A=Object(a["createTextVNode"])("Connect"),S=Object(a["createTextVNode"])("APPROVE"),_=Object(a["createTextVNode"])("AIRDROP"),M=Object(a["createTextVNode"])("AIRDROP");function R(e,t,c,o,R,I){const D=Object(a["resolveComponent"])("caret-bottom"),H=Object(a["resolveComponent"])("el-icon"),P=Object(a["resolveComponent"])("loading"),U=Object(a["resolveComponent"])("QuestionFilled"),F=Object(a["resolveComponent"])("el-tooltip"),z=Object(a["resolveComponent"])("el-button"),$=Object(a["resolveDirective"])("click-outside");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[s,Object(a["createElementVNode"])("div",n,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["airdrop-type flex-row-between pointer MB-20",{"type-show":R.typesShow}]),onClick:t[2]||(t[2]=e=>R.typesShow=!R.typesShow)},[Object(a["createElementVNode"])("div",r,[l,Object(a["createElementVNode"])("div",d,Object(a["toDisplayString"])(1==R.type?"其他代币":"BNB"),1)]),Object(a["createVNode"])(H,{color:"#fff",size:16},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(D)]),_:1}),Object(a["createVNode"])(a["Transition"],{name:"el-zoom-in-top"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("div",{class:"airdrop-type__list-item",onClick:t[0]||(t[0]=e=>I.toggleType(1))},"其他代币"),Object(a["createElementVNode"])("div",{class:"airdrop-type__list-item",onClick:t[1]||(t[1]=e=>I.toggleType(2))},"BNB")],512),[[a["vShow"],R.typesShow]])]),_:1})],2)),[[$,I.clickOutside]]),b,Object(a["createElementVNode"])("div",h,"空投费用:"+Object(a["toDisplayString"])(R.utils.formatEther(R.feeAmount))+" BNB",1),Object(a["createVNode"])(a["Transition"],{name:"el-zoom-in-top"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createElementVNode"])("div",f,[m,Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>R.tokenAddr=e),class:"airdrop-type__input text-22 text-white flex-1",placeholder:"请输入令牌地址"},null,512),[[a["vModelText"],R.tokenAddr,void 0,{trim:!0}]]),Object(a["withDirectives"])(Object(a["createVNode"])(H,{class:"is-loading",color:"#fff"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(P)]),_:1},512),[[a["vShow"],R.searchLoading]])])],512),[[a["vShow"],1==R.type]])]),_:1}),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",j,[u,Object(a["createElementVNode"])("span",v,Object(a["toDisplayString"])(R.ERC20Info.symbol)+"("+Object(a["toDisplayString"])(R.ERC20Info.name||"--")+")",1)],512),[[a["vShow"],1==R.type]]),Object(a["createElementVNode"])("div",w,[Object(a["createElementVNode"])("div",g,[x,1==R.type?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",y,Object(a["toDisplayString"])(R.utils.formatUnits(R.ERC20Info.balance,R.ERC20Info.decimals)),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",E,Object(a["toDisplayString"])(R.utils.formatEther(R.ERC20Info.balance)),1))]),Object(a["createElementVNode"])("div",k,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",placeholder:"请输入质押数量",class:"airdrop-input text-20 MR-10","onUpdate:modelValue":t[4]||(t[4]=e=>R.price=e)},null,512),[[a["vModelText"],R.price,void 0,{trim:!0}]]),Object(a["createVNode"])(F,{class:"box-item",effect:"dark",content:"统一发放数量，为空则按照默认规则发放",placement:"top"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(H,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(U)]),_:1})]),_:1})])]),Object(a["createElementVNode"])("div",N,[Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>R.disListInfo=e),class:"airdrop-list__textarea text-white text-20",placeholder:"输入分发列表"},null,512),[[a["vModelText"],R.disListInfo,void 0,{trim:!0}]])]),C,Object(a["createElementVNode"])("div",V,[L,Object(a["createElementVNode"])("span",T,Object(a["toDisplayString"])(I.totalPrice),1)]),Object(a["createElementVNode"])("div",B,[R.isLogin?2==R.isApprove?(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:1,class:"btn btn-line color-text MR-20",loading:R.approveLoading,onClick:I.approveHandler},{default:Object(a["withCtx"])(()=>[S]),_:1},8,["loading","onClick"])):1==R.isApprove?(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:2,class:"btn",loading:R.airdropLoading,onClick:I.airdropHandler},{default:Object(a["withCtx"])(()=>[_]),_:1},8,["loading","onClick"])):Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:0,class:"btn btn-line color-text MR-20",loading:R.loginLoading,onClick:I.loginHandler},{default:Object(a["withCtx"])(()=>[A]),_:1},8,["loading","onClick"])),0==R.isApprove&&2==R.type?(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:3,class:"btn",loading:R.airdropLoading,onClick:I.airdropETHHandler},{default:Object(a["withCtx"])(()=>[M]),_:1},8,["loading","onClick"])):Object(a["createCommentVNode"])("",!0)])])])}c("59eb");var I=c("4d90"),D=c("90fe"),H=c("eba7"),P=c("e5da"),U=c("25c2"),F=c("b6f8"),z=c("76a2"),$=c("dcd5"),J=c("272a");window.Contract=H["a"],window.IERC20ABI=F;let Q=null,W=null;var Z={data(){return{utils:P["b"],typesShow:!1,type:1,isLogin:!1,isApprove:0,approveLoading:!1,loginLoading:!1,feeAmount:U["a"].from(0),tokenAddr:"",disListInfo:"",airdropLoading:!1,searchLoading:!1,price:"",ERC20Info:{name:"",symbol:"",decimals:0,balance:U["a"].from(0),allowance:U["a"].from(0)}}},computed:{disList(){let e=[];const t=[];this.disListInfo&&(e=this.disListInfo.split("\n"));for(let c=0;c<e.length;c++){const a=e[c],o=a.split(",");t.push({addr:o[0],price:this.price||o[1]})}return t},totalPrice(){let e=0;return this.disList.forEach(t=>{const c=t.price;c&&!isNaN(c)&&(e+=Number(c))}),e}},watch:{tokenAddr:Object(D["b"])((async function(){this.searchLoading=!0;try{const e=this.$wallet.initContract(this.tokenAddr,F),[t,c,a,o,i]=await Promise.all([e.name(),e.symbol(),e.decimals(),e.balanceOf(wallet.accounts[0]),e.allowance(wallet.accounts[0],Q.address)]);this.ERC20Info={name:t,symbol:c,decimals:a,balance:o},this.isApprove=i.isZero()?2:1,W=e}catch(e){console.error(e),this.ERC20Info={name:"",symbol:"",decimals:0,balance:U["a"].from(0),allowance:U["a"].from(0)},this.isApprove=2,W=null}this.searchLoading=!1}),500)},created(){this.isLoginFn(),this.$wallet.on("accountChange",()=>{this.isLoginFn()})},methods:{...Object(J["b"])(["setConnectDialog"]),async isLoginFn(){this.$wallet.accounts[0]?(this.isApprove=0,this.isLogin=!0,Q=window.wallet.initContract($["product"].SWAP_HELPER,z),Q.callFee().then(e=>{this.feeAmount=e})):this.isLogin=!1},getBnbBalance(){Q.provider.getBalance(wallet.accounts[0]).then(e=>{this.ERC20Info={name:"BNB",balance:e}})},clickOutside(){this.typesShow=!1},toggleType(e){this.type=e,this.ERC20Info={name:"",symbol:"",decimals:0,balance:U["a"].from(0),allowance:U["a"].from(0)},2===e&&this.getBnbBalance()},loginHandler(){this.setConnectDialog(!0)},async approveHandler(){const e=this.dataVerify();if(e){this.approveLoading=!0;try{const e=await W.totalSupply(),t=await W.approve(Q.address,e);await t.wait(),this.isApprove=1}catch(t){console.error(t),Object(D["a"])(t)}this.approveLoading=!1}},async airdropHandler(){this.airdropLoading=!0;try{const{address:e}=W,t=this.disList.map(e=>e.addr),c=this.disList.map(e=>P["b"].parseUnits(e.price.toString(),this.ERC20Info.decimals)),a=c.reduce((e,t)=>e.add(t));console.log(P["b"].formatUnits(a,18),Q,this.ERC20Info.decimals);const o=await Q.manyTransferToken(e,t,c,{value:this.feeAmount});await o.wait(),Object(I["a"])({type:"success",title:"Success",message:"Airdrop Success"})}catch(e){console.error(e),Object(D["a"])(e)}this.airdropLoading=!1},async airdropETHHandler(){this.airdropLoading=!0;try{const e=this.disList.map(e=>e.addr),t=this.disList.map(e=>P["b"].parseEther(e.price.toString())),c=t.reduce((e,t)=>e.add(t),this.feeAmount),a=await Q.manyTransferETH(e,t,{value:c});await a.wait(),Object(I["a"])({type:"success",title:"Success",message:"Airdrop Success"})}catch(e){console.error(e),Object(D["a"])(e)}this.airdropLoading=!1},dataVerify(){if(!this.tokenAddr)return Object(I["a"])({type:"error",title:"Tips",message:"Please Enter Token Address"}),!1;if(this.disList.length<=0)return Object(I["a"])({type:"error",title:"Tips",message:"Please Enter Distribution List"}),!1;let e=!0;for(let t=0;t<this.disList.length;t++){const{addr:c,price:a}=this.disList[t];if("0x"!==c.substr(0,2)||42!==c.length||!a){Object(I["a"])({type:"error",title:"Tips",message:`The format of line ${t+1} is wrong, please check the vehicle`}),e=!1;break}}return e}}},q=(c("107f"),c("6dd4")),G=c.n(q);const K=G()(Z,[["render",R],["__scopeId","data-v-e8f533c6"]]);t["default"]=K},"536e":function(e,t,c){"use strict";var a=c("d73c");e.exports=function(e,t){var c=[][e];return!!c&&a((function(){c.call(null,t||function(){return 1},1)}))}},"59eb":function(e,t,c){"use strict";var a=c("acc7"),o=c("fb71").left,i=c("536e"),s=c("dbf3"),n=c("84cc"),r=i("reduce"),l=!n&&s>79&&s<83;a({target:"Array",proto:!0,forced:!r||l},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},"68c3":function(e,t,c){},"84cc":function(e,t,c){var a=c("adbe"),o=c("9a2f");e.exports="process"==a(o.process)},fb71:function(e,t,c){var a=c("49da"),o=c("a228"),i=c("9541"),s=c("c831"),n=TypeError,r=function(e){return function(t,c,r,l){a(c);var d=o(t),p=i(d),b=s(d),h=e?b-1:0,f=e?-1:1;if(r<2)while(1){if(h in p){l=p[h],h+=f;break}if(h+=f,e?h<0:b<=h)throw n("Reduce of empty array with no initial value")}for(;e?h>=0:b>h;h+=f)h in p&&(l=c(l,p[h],h,d));return l}};e.exports={left:r(!1),right:r(!0)}}}]);
//# sourceMappingURL=chunk-b4549c38.41603c62.js.map