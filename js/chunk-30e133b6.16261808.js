(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30e133b6"],{"053f":function(e,t,s){"use strict";s.r(t);var a=s("33a9");const o={class:"tool"};function n(e,t){const s=Object(a["resolveComponent"])("ImputationVue"),n=Object(a["resolveComponent"])("el-tab-pane"),c=Object(a["resolveComponent"])("AirfropVue"),i=Object(a["resolveComponent"])("el-tabs");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createVNode"])(i,{modelValue:e.activeName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.activeName=t),class:"swap-tabs",onTabClick:e.tabChange},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(n,{label:"归集",name:"Imputation",lazy:""},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1}),Object(a["createVNode"])(n,{label:"空投",name:"Airdrop",lazy:""},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c)]),_:1})]),_:1},8,["modelValue","onTabClick"])])}var c=s("30ed"),i=s.n(c);const l=e=>(Object(a["pushScopeId"])("data-v-17c8ad92"),e=e(),Object(a["popScopeId"])(),e),r={class:"flex-row-center flex-1 flex-start wrapper"},d={class:"swap-info PB-20 imputation"},b={class:"swap-item"},m={class:"swap-item__top flex-row-between"},p={class:"flex-row-start align-center pointer"},h={class:"swap-item__top-icon MR-10"},O={class:"swap-item__top-name text-overflow__1"},u={class:"swap-item__desc text-20 flex-row-end align-center"},g=l(()=>Object(a["createElementVNode"])("img",{src:i.a,class:"swap-transform pointer"},null,-1)),j={key:0,class:"flex-1 wrapper-box__back flex-column-start"},k={class:"flex-h__1"},w={class:"imputation-table"},f=l(()=>Object(a["createElementVNode"])("th",null,"发送地址",-1)),N=l(()=>Object(a["createElementVNode"])("th",null,"接收地址",-1)),v=l(()=>Object(a["createElementVNode"])("th",null,"执行结果",-1)),V={class:"flex-row-start align-center MB-20 MT-20"},C=l(()=>Object(a["createElementVNode"])("div",{class:"text-16 MR-30"},"发送数量",-1)),x={class:"swap-item__input flex-1 flex-row-start align-center"},y={class:"swap-slippage MT-10 MB-20"},T={class:"swap-slippage__select flex-row-between pointer"},E=l(()=>Object(a["createElementVNode"])("div",{class:"text-16"},"GWEI",-1)),B={class:"flex-row-end"},_={class:"flex-row-start align-center"};function L(e,t){const s=Object(a["resolveComponent"])("ArrowDown"),o=Object(a["resolveComponent"])("el-icon"),n=Object(a["resolveComponent"])("CopyDocument"),c=Object(a["resolveComponent"])("el-switch"),i=Object(a["resolveComponent"])("el-button"),l=Object(a["resolveComponent"])("Loading"),L=Object(a["resolveComponent"])("el-tag"),D=Object(a["resolveComponent"])("Back"),I=Object(a["resolveComponent"])("Tokens"),A=Object(a["resolveDirective"])("lazy");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["wrapper-box",{back:e.isBack}])},[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("div",{class:"flex-row-start align-center",onClick:t[0]||(t[0]=t=>e.openTokensDialog("item1"))},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",h,null,512),[[A,e.getLogo(e.item1.address)]]),Object(a["createElementVNode"])("div",O,Object(a["toDisplayString"])(e.item1.symbol),1),Object(a["createVNode"])(o,{class:"ML-5"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1})]),Object(a["createVNode"])(o,{class:"ML-5",onClick:t[1]||(t[1]=t=>e.copyHandler(e.item1.address))},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(n)]),_:1})]),Object(a["createElementVNode"])("div",u,[Object(a["createTextVNode"])(" 开启多对单"),Object(a["createVNode"])(c,{modelValue:e.toOne,"onUpdate:modelValue":t[2]||(t[2]=t=>e.toOne=t),class:"ML-10"},null,8,["modelValue"])])])]),Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{class:"imputation-textarea","onUpdate:modelValue":t[3]||(t[3]=t=>e.sendAddress=t),placeholder:"请输入发送方私钥"},null,512),[[a["vModelText"],e.sendAddress]]),g,e.toOne?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",{key:1,type:"text",placeholder:"请输入接收方钱包地址","onUpdate:modelValue":t[5]||(t[5]=t=>e.getAddressOne=t),class:"imputation-input"},null,512)),[[a["vModelText"],e.getAddressOne]]):Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("textarea",{key:0,class:"imputation-textarea","onUpdate:modelValue":t[4]||(t[4]=t=>e.getAddress=t),placeholder:"请输入接收方地址"},null,512)),[[a["vModelText"],e.getAddress]]),Object(a["createVNode"])(i,{class:"swap-btn MT-10",disabled:!e.sendAddress||!e.getAddress&&!e.getAddressOne,loading:e.imputationLoading,onClick:e.imputationHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("查询")]),_:1},8,["disabled","loading","onClick"])]),e.isBack?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createElementVNode"])("div",k,[Object(a["createElementVNode"])("table",w,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[f,N,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.item1.symbol)+"余额",1),v])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tableList,(t,s)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:s},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.provider?e.showAddress(t.provider.address):"--"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.getAddress?e.showAddress(t.getAddress):"--"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.balance||"--"),1),Object(a["createElementVNode"])("td",null,[t.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l)]),_:1})):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.message),1)],64))])]))),128))])])]),Object(a["createElementVNode"])("div",V,[C,Object(a["createElementVNode"])("div",x,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"text-right flex-1","onUpdate:modelValue":t[6]||(t[6]=t=>e.price=t),placeholder:"0.00"},null,512),[[a["vModelText"],e.price]])])]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("div",T,[E,Object(a["createElementVNode"])("div",B,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.gWeiList,t=>(Object(a["openBlock"])(),Object(a["createBlock"])(L,{class:"swap-slippage__select-tag",type:"warning",effect:e.gWei==t?"dark":"light",onClick:s=>e.toggleGwei(t),key:t},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t),1)]),_:2},1032,["effect","onClick"]))),128)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"swap-slippage__select-input",placeholder:"5","onUpdate:modelValue":t[7]||(t[7]=t=>e.gWei=t)},null,512),[[a["vModelText"],e.gWei,void 0,{number:!0}]])])])]),Object(a["createElementVNode"])("div",_,[e.hasLoading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,size:40,class:"pointer",onClick:t[8]||(t[8]=t=>e.isBack=!1)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(D)]),_:1})),Object(a["createVNode"])(i,{class:"flex-1 swap-btn ML-20",loading:e.hasLoading,disabled:!e.price,onClick:e.imputationConfitm},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("确认")]),_:1},8,["loading","disabled","onClick"])])])):Object(a["createCommentVNode"])("",!0)],2)]),Object(a["createVNode"])(I,{ref:"tokens",onChange:e.tokenChange,onUpdate:e.tokenUpdate},null,8,["onChange","onUpdate"])],64)}s("0e47");var D=s("c64b"),I=s("5f79"),A=s("b6f8"),S=s("8e44"),M=s("1630"),U=s("90fe"),W=s("767c"),H=s("6d13");const{t:P}=H["a"].global;var R={data(){return{t:P,utils:M["b"],getLogo:U["d"],getBit:U["c"],toOne:!0,isBack:!1,price:"",activeName:"imputation",progress:10,imputationLoading:!1,gWei:5,gWeiList:[5,7,10,15,20],type:"",sendAddress:"",getAddressOne:"",getAddress:"",tableList:[],item1:{name:"BNB",symbol:"BNB",address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",balance:"",price:"",loading:!1}}},components:{Tokens:D["a"]},watch:{"currentNetwork.ChainID":{immediate:!0,handler(){const{Token:e}=this.currentNetwork,t=e[0],s=e[1]||e[0];this.item1={...this.item1,...t},this.item2={...this.item2,...s},this.gWei=5*this.currentNetwork.GWEI,this.gWeiList=[5*this.currentNetwork.GWEI,7*this.currentNetwork.GWEI,10*this.currentNetwork.GWEI,15*this.currentNetwork.GWEI,20*this.currentNetwork.GWEI]}}},directives:{bit:{updated(e){e.value=e.value?Object(U["c"])(e.value,5):""}}},computed:{...Object(W["c"])(["currentNetwork","networkList","currentDex"]),hasLoading(){const e=this.tableList.find(e=>e.loading);return!!e}},methods:{...Object(W["b"])(["setCurrentDex","setConnectDialog"]),showAddress(e){return"0x..."+e.slice(-4)},async imputationHandler(){this.imputationLoading=!0;const e=this.sendAddress.split("\n");let t,s=this.getAddress.split("\n"),a=!0;if(this.toOne)42!=this.getAddressOne.length&&(Object(S["a"])({type:"error",title:"温馨提醒",message:"接收方账号错误，请检查"}),a=!1);else for(let l=0;l<s.length;l++){const e=s[l];if(42!=e.length){Object(S["a"])({type:"error",title:"温馨提醒",message:`第${l}行账号错误，请检查`}),a=!1;break}}if(!a)return;const o=[],n=[];for(let l=0;l<e.length;l++){const a=e[l];let c,r,d,b;try{c=window.wallet.getPrivateKeyProvider(a),b=window.wallet.initContract(this.item1.address,A,c),t||(t=await b.decimals()),this.item1.address==this.currentNetwork.MainCoin.address?n.push(c.getBalance()):n.push(b.balanceOf(c.address))}catch(i){console.log(i),r=-1,d=i.data?i.data.message||i.message:i.reason||i.message}o.push({provider:c,getAddress:this.toOne?this.getAddressOne:s[l],balance:0,status:r,message:d,contract:b,decimals:t,loading:!1})}const c=await Promise.allSettled(n);c.forEach((e,s)=>{"fulfilled"===e.status?(o[s].balance=Object(U["c"])(M["b"].formatUnits(e.value.toString(),t),6),o[s].status=0):(o[s].balance="",o[s].status=-1,o[s].message="余额查询失败")}),this.tableList=o,this.imputationLoading=!1,this.isBack=!0},async imputationConfitm(){this.tableList.forEach(async(e,t)=>{if(e=Object(a["toRaw"])(e),0==e.status){let s;this.tableList[t].loading=!0,s=this.item1.address==this.currentNetwork.MainCoin.address?e.provider.sendTransaction({from:e.provider.address,to:e.getAddress,value:M["b"].parseUnits(this.price.toString(),18)}):e.contract.transfer(e.getAddress,M["b"].parseUnits(this.price.toString(),e.decimals),{gasPrice:M["b"].parseUnits(this.gWei.toString(),9),gasLimit:2e5}),s.then(e=>{e.wait().then(()=>{this.tableList[t].status=1,this.tableList[t].message="发送成功",this.tableList[t].loading=!1}).catch(e=>{console.log(t,e),this.tableList[t].status=0,this.tableList[t].message="发送失败",this.tableList[t].loading=!1})}).catch(e=>{console.log(t,e),this.tableList[t].status=0,this.tableList[t].message="发送失败",this.tableList[t].loading=!1})}})},tokenUpdate({name:e,symbol:t}){this.item1.name=e,this.item1.symbol=t},async tokenChange(e){this.item1=e},copyHandler(e){Object(I["a"])(e),Object(S["a"])({type:P("swap.success"),title:P("swap.success"),message:P("swap.copySuccess")})},toggleGwei(e){this.gWei=e},openTokensDialog(e){this.type=e,this.$refs.tokens.open()},loginFn(){this.setConnectDialog(!0)}}};s("ea0d");R.render=L,R.__scopeId="data-v-17c8ad92";var G=R,z=s("2728"),F={data(){return{activeName:"Imputation"}},components:{ImputationVue:G,AirfropVue:z["default"]},methods:{tabChange(){Object(U["e"])("Tea Dao-"+this.activeName)}}};s("ddaa"),s("bb61");F.render=n;t["default"]=F},"0c0d":function(e,t,s){},"30ed":function(e,t){e.exports="./images/transform5dc41586b2a3ba671b8cb88580863420.png"},"48ec":function(e,t,s){},"9d65":function(e,t,s){},b468:function(e,t,s){"use strict";s("0c0d")},bb61:function(e,t,s){"use strict";s("48ec")},be8b:function(e,t,s){},c64b:function(e,t,s){"use strict";var a=s("33a9");const o={class:"flex-column-start tokens-content"},n={class:"flex-row-start align-center"},c={class:"flex-h__1 tokens-list"},i={key:0,class:"tokens-list__import flex-row-start align-center PL-30 PR-30 PB-30 PT-30"},l={class:"flex-row-start flex-1 align-center"},r={class:"tokens-list__item-icon MR-10"},d={class:"tokens-list__import-name MR-10"},b={class:"tokens-list__import-desc"},m=["onClick"],p={class:"tokens-list__item-icon MR-10"},h={class:"flex-1"},O={class:"token-list__item-title"},u={class:"token-list__item-desc"},g={class:"token-list__item-price"};function j(e,t){const s=Object(a["resolveComponent"])("el-button"),j=Object(a["resolveComponent"])("Close"),k=Object(a["resolveComponent"])("el-icon"),w=Object(a["resolveComponent"])("el-dialog"),f=Object(a["resolveDirective"])("lazy");return Object(a["openBlock"])(),Object(a["createBlock"])(w,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),title:e.$t("swap.selectToken"),width:"420px","custom-class":"tokens"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",n,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"tokens-input flex-1","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTxt=t),placeholder:"Search name or paste address"},null,512),[[a["vModelText"],e.searchTxt,void 0,{trim:!0}]]),Object(a["createVNode"])(s,{class:"MR-20",onClick:t[1]||(t[1]=t=>e.fastImport()),disabled:!e.searchTxt||42!=e.searchTxt.length&&!e.importTokens.name},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("swap.fastImport")),1)]),_:1},8,["disabled"])]),Object(a["createElementVNode"])("div",c,[e.importTokens.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",i,[Object(a["createElementVNode"])("div",l,[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",r,null,512),[[f,e.getLogo(e.importTokens.address)]]),Object(a["createElementVNode"])("div",d,Object(a["toDisplayString"])(e.importTokens.name),1),Object(a["createElementVNode"])("div",b,Object(a["toDisplayString"])(e.importTokens.symbol),1)]),Object(a["createVNode"])(s,{class:"tokens-list__import-btn",onClick:e.importHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("swap.import")),1)]),_:1},8,["onClick"])])):(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:1},Object(a["renderList"])(e.getTokens,(t,s)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"tokens-list__item pointer flex-row-start align-center pointer",key:t.address,onClick:s=>e.selectHandler(t)},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",p,null,512),[[f,e.getLogo(t.address)]]),Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",O,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("div",u,Object(a["toDisplayString"])(t.symbol),1)]),Object(a["createElementVNode"])("div",g,Object(a["toDisplayString"])(t.balance?e.getBit(e.utils.formatUnits(t.balance,t.decimals||18),5):""),1),t.isAdd?(Object(a["openBlock"])(),Object(a["createBlock"])(k,{key:0,size:30,color:"#fff",class:"ML-10",onClick:Object(a["withModifiers"])(t=>e.removeTokens(s),["stop"])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j)]),_:2},1032,["onClick"])):Object(a["createCommentVNode"])("",!0)],8,m))),128))])])]),_:1},8,["modelValue","title"])}s("0e47");var k=s("1630"),w=s("90fe"),f=s("767c"),N={name:"Tokens",data(){return{utils:k["b"],getBit:w["c"],getLogo:w["d"],dialogVisible:!1,activeAddress:[],searchTxt:"",getTokens:[],importTokens:{},tokens:[],type:""}},computed:{...Object(f["c"])(["currentNetwork"])},async mounted(){const{outputCurrency:e,inputCurrency:t}=this.$route.query;e&&42==e.length&&(this.type="item2",await this.getCurrencyInfo(e),this.importHandler()),t&&42==t.length&&(this.type="item1",await this.getCurrencyInfo(t),this.importHandler()),this.type=""},watch:{"currentNetwork.ChainID":{immediate:!0,handler(){let e=localStorage.getItem(this.currentNetwork.ChainID+"tokens");this.tokens=e?JSON.parse(e):this.currentNetwork.Token,this.getTokens=Object(a["toRaw"])(this.tokens),this.getBalance()}},searchTxt(e){this.searchTxtChange(e)}},methods:{searchTxtChange(e){e||(this.getTokens=Object(a["toRaw"])(this.tokens));const t=this.tokens.filter(t=>{const{name:s,address:a}=t;return!(!s.toLocaleLowerCase().includes(e.toLocaleLowerCase())&&!a.toLocaleLowerCase().includes(e.toLocaleLowerCase()))});this.importTokens={},this.getTokens=Object(a["toRaw"])(t),t.length<=0&&42===e.length&&this.getCurrencyInfo(e)},fastImport(e,t=!0){e=e||this.searchTxt;const s=this.tokens.find(t=>t.address===e);if(s)this.selectHandler(s);else{this.importTokens={name:e.slice(0,6),symbol:e.slice(0,6),address:e,isAdd:!0},this.importHandler(t);const s=window.wallet.initContract(e),a=[s.name(),s.symbol()];Promise.all(a).then(([t,s])=>{this.updateTokenInfo(e,t,s)})}},updateTokenInfo(e,t,s){const a=this.tokens.findIndex(t=>t.address===e);a>=0&&(this.tokens[a].name=t,this.tokens[a].symbol=s);const o=this.getTokens.findIndex(t=>t.address===e);o>=0&&(this.getTokens[o].name=t,this.getTokens[o].symbol=s),this.$emit("update",{address:e,name:t,symbol:s}),localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))},removeTokens(e){const t=this.getTokens[e],s=this.tokens.findIndex(e=>t.address==e.address);this.tokens.splice(s,1),this.searchTxtChange(this.searchTxt),localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))},async getCurrencyInfo(e){const t=window.wallet.initContract(e),s=[t.name(),t.symbol(),t.decimals()];try{await Promise.all(s).then(([t,s,a])=>{this.importTokens={name:t,symbol:s,decimals:a,address:e,isAdd:!0}})}catch(a){Object(w["a"])(a)}},async getBalance(){if(!window.wallet.accounts[0]){for(let e=0;e<this.getTokens.length;e++)this.getTokens[e].balance="";return}let e=[];for(let t=0;t<this.getTokens.length;t++){const s=this.getTokens[t];let a;if(s.address===this.currentNetwork.MainCoin.address)a=window.wallet.provider.getBalance();else{const e=window.wallet.initContract(s.address);a=e.balanceOf(window.wallet.accounts[0])}e.push(a)}Promise.allSettled(e).then(e=>{e.forEach((e,t)=>{const{status:s,value:a}=e;this.getTokens[t].balance="fulfilled"===s?a:""})})},importHandler(e=!0){const t=this.tokens.find(e=>e.address===this.importTokens.address);!t&&e&&(this.tokens.push(this.importTokens),this.searchTxt="",localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))),this.selectHandler(this.importTokens)},open(e){this.activeAddress=e,this.dialogVisible=!0,this.importTokens={},this.getBalance()},selectHandler(e){this.$emit("change",e,this.type),this.dialogVisible=!1,this.importTokens={}}}};s("b468");N.render=j;t["a"]=N},ddaa:function(e,t,s){"use strict";s("9d65")},ea0d:function(e,t,s){"use strict";s("be8b")}}]);
//# sourceMappingURL=chunk-30e133b6.16261808.js.map