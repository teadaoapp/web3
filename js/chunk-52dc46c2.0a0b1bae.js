(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52dc46c2","chunk-2d0d7806"],{"053f":function(e,t,s){"use strict";s.r(t);var a=s("33a9");const n={class:"tool"};function c(e,t){const s=Object(a["resolveComponent"])("ImputationVue"),c=Object(a["resolveComponent"])("el-tab-pane"),i=Object(a["resolveComponent"])("SwapVue"),o=Object(a["resolveComponent"])("el-tabs");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createVNode"])(o,{modelValue:e.activeName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.activeName=t),class:"swap-tabs"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{label:"归集",name:"imputation",lazy:""},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1}),Object(a["createVNode"])(c,{label:"批量Swap",name:"swap",lazy:""},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i)]),_:1})]),_:1},8,["modelValue"])])}var i=s("30ed"),o=s.n(i);const l=e=>(Object(a["pushScopeId"])("data-v-7924701a"),e=e(),Object(a["popScopeId"])(),e),r={class:"flex-row-center flex-1 flex-start wrapper"},d={class:"swap-info PB-20 imputation"},b={class:"swap-item"},m={class:"swap-item__top flex-row-between"},p={class:"flex-row-start align-center pointer"},u={class:"swap-item__top-icon MR-10"},h={class:"swap-item__top-name text-overflow__1"},O={class:"swap-item__desc text-20 flex-row-end align-center"},g=l(()=>Object(a["createElementVNode"])("img",{src:o.a,class:"swap-transform pointer"},null,-1)),j={key:0,class:"flex-1 wrapper-box__back flex-column-start"},w={class:"flex-h__1"},k={class:"imputation-table"},y=l(()=>Object(a["createElementVNode"])("th",null,"发送地址",-1)),f=l(()=>Object(a["createElementVNode"])("th",null,"接收地址",-1)),N=l(()=>Object(a["createElementVNode"])("th",null,"执行结果",-1)),v={class:"flex-row-start align-center MB-20 MT-20"},V=l(()=>Object(a["createElementVNode"])("div",{class:"text-16 MR-30"},"发送数量",-1)),E={class:"swap-item__input flex-1 flex-row-start align-center"},x={class:"swap-slippage MT-10 MB-20"},C={class:"swap-slippage__select flex-row-between pointer"},T=l(()=>Object(a["createElementVNode"])("div",{class:"text-16"},"GWEI",-1)),B={class:"flex-row-end"},_={class:"flex-row-start align-center"};function L(e,t){const s=Object(a["resolveComponent"])("ArrowDown"),n=Object(a["resolveComponent"])("el-icon"),c=Object(a["resolveComponent"])("CopyDocument"),i=Object(a["resolveComponent"])("el-switch"),o=Object(a["resolveComponent"])("el-button"),l=Object(a["resolveComponent"])("Loading"),L=Object(a["resolveComponent"])("el-tag"),D=Object(a["resolveComponent"])("Back"),M=Object(a["resolveComponent"])("Tokens"),S=Object(a["resolveDirective"])("lazy");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["wrapper-box",{back:e.isBack}])},[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("div",{class:"flex-row-start align-center",onClick:t[0]||(t[0]=t=>e.openTokensDialog("item1"))},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",u,null,512),[[S,e.getLogo(e.item1.address)]]),Object(a["createElementVNode"])("div",h,Object(a["toDisplayString"])(e.item1.symbol),1),Object(a["createVNode"])(n,{class:"ML-5"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1})]),Object(a["createVNode"])(n,{class:"ML-5",onClick:t[1]||(t[1]=t=>e.copyHandler(e.item1.address))},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c)]),_:1})]),Object(a["createElementVNode"])("div",O,[Object(a["createTextVNode"])(" 开启多对单"),Object(a["createVNode"])(i,{modelValue:e.toOne,"onUpdate:modelValue":t[2]||(t[2]=t=>e.toOne=t),class:"ML-10"},null,8,["modelValue"])])])]),Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{class:"imputation-textarea","onUpdate:modelValue":t[3]||(t[3]=t=>e.sendAddress=t),placeholder:"请输入发送方私钥"},null,512),[[a["vModelText"],e.sendAddress]]),g,e.toOne?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",{key:1,type:"text",placeholder:"请输入接收方钱包地址","onUpdate:modelValue":t[5]||(t[5]=t=>e.getAddressOne=t),class:"imputation-input"},null,512)),[[a["vModelText"],e.getAddressOne]]):Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("textarea",{key:0,class:"imputation-textarea","onUpdate:modelValue":t[4]||(t[4]=t=>e.getAddress=t),placeholder:"请输入接收方地址"},null,512)),[[a["vModelText"],e.getAddress]]),Object(a["createVNode"])(o,{class:"swap-btn MT-10",disabled:!e.sendAddress||!e.getAddress&&!e.getAddressOne,loading:e.imputationLoading,onClick:e.imputationHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("查询")]),_:1},8,["disabled","loading","onClick"])]),e.isBack?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,[Object(a["createElementVNode"])("div",w,[Object(a["createElementVNode"])("table",k,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[y,f,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.item1.symbol)+"余额",1),N])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tableList,(t,s)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:s},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.provider?e.showAddress(t.provider.address):"--"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.getAddress?e.showAddress(t.getAddress):"--"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.balance||"--"),1),Object(a["createElementVNode"])("td",null,[t.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0,class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l)]),_:1})):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.message),1)],64))])]))),128))])])]),Object(a["createElementVNode"])("div",v,[V,Object(a["createElementVNode"])("div",E,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"text-right flex-1","onUpdate:modelValue":t[6]||(t[6]=t=>e.price=t),placeholder:"0.00"},null,512),[[a["vModelText"],e.price]])])]),Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",C,[T,Object(a["createElementVNode"])("div",B,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.gWeiList,t=>(Object(a["openBlock"])(),Object(a["createBlock"])(L,{class:"swap-slippage__select-tag",type:"warning",effect:e.gWei==t?"dark":"light",onClick:s=>e.toggleGwei(t),key:t},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t),1)]),_:2},1032,["effect","onClick"]))),128)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"swap-slippage__select-input",placeholder:"5","onUpdate:modelValue":t[7]||(t[7]=t=>e.gWei=t)},null,512),[[a["vModelText"],e.gWei,void 0,{number:!0}]])])])]),Object(a["createElementVNode"])("div",_,[Object(a["createVNode"])(n,{size:40,class:"pointer",onClick:t[8]||(t[8]=t=>e.isBack=!1)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(D)]),_:1}),Object(a["createVNode"])(o,{class:"flex-1 swap-btn ML-20",loading:e.loading,disabled:!e.price,onClick:e.imputationConfitm},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("确认")]),_:1},8,["loading","disabled","onClick"])])])):Object(a["createCommentVNode"])("",!0)],2)]),Object(a["createVNode"])(M,{ref:"tokens",onChange:e.tokenChange,onUpdate:e.tokenUpdate},null,8,["onChange","onUpdate"])],64)}s("0e47");var D=s("c64b"),M=s("5f79"),S=s("b6f8"),A=s("8e44"),I=s("1630"),W=s("90fe"),U=s("767c"),P=s("6d13");const{t:H}=P["a"].global;var R={data(){return{t:H,utils:I["b"],getLogo:W["d"],getBit:W["c"],toOne:!0,isBack:!1,price:"",activeName:"imputation",progress:10,loading:!1,imputationLoading:!1,gWei:5,gWeiList:[5,7,10,15,20],type:"",sendAddress:"",getAddressOne:"",getAddress:"",tableList:[],item1:{name:"BNB",symbol:"BNB",address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",balance:"",price:"",loading:!1}}},components:{Tokens:D["a"]},watch:{"currentNetwork.ChainID":{immediate:!0,handler(){const{Token:e}=this.currentNetwork,t=e[0],s=e[1]||e[0];this.item1={...this.item1,...t},this.item2={...this.item2,...s},this.gWei=5*this.currentNetwork.GWEI,this.gWeiList=[5*this.currentNetwork.GWEI,7*this.currentNetwork.GWEI,10*this.currentNetwork.GWEI,15*this.currentNetwork.GWEI,20*this.currentNetwork.GWEI]}}},directives:{bit:{updated(e){e.value=e.value?Object(W["c"])(e.value,5):""}}},computed:{...Object(U["c"])(["currentNetwork","networkList","currentDex"])},methods:{...Object(U["b"])(["setCurrentDex","setConnectDialog"]),showAddress(e){return"0x..."+e.slice(-4)},async imputationHandler(){this.imputationLoading=!0;const e=this.sendAddress.split("\n");let t,s=this.getAddress.split("\n"),a=!0;if(this.toOne)42!=this.getAddressOne.length&&(Object(A["a"])({type:"error",title:"温馨提醒",message:"接收方账号错误，请检查"}),a=!1);else for(let l=0;l<s.length;l++){const e=s[l];if(42!=e.length){Object(A["a"])({type:"error",title:"温馨提醒",message:`第${l}行账号错误，请检查`}),a=!1;break}}if(!a)return;const n=[],c=[];for(let l=0;l<e.length;l++){const a=e[l];let i,r,d,b;try{i=window.wallet.getPrivateKeyProvider(a),b=window.wallet.initContract(this.item1.address,S,i),t||(t=await b.decimals()),this.item1.address==this.currentNetwork.MainCoin.address?c.push(i.getBalance()):c.push(b.balanceOf(i.address))}catch(o){console.log(o),r=-1,d=o.data?o.data.message||o.message:o.reason||o.message}n.push({provider:i,getAddress:this.toOne?this.getAddressOne:s[l],balance:0,status:r,message:d,contract:b,decimals:t,loading:!1})}const i=await Promise.allSettled(c);i.forEach((e,s)=>{"fulfilled"===e.status?(n[s].balance=Object(W["c"])(I["b"].formatUnits(e.value.toString(),t),6),n[s].status=0):(n[s].balance="",n[s].status=-1,n[s].message="余额查询失败")}),this.tableList=n,this.imputationLoading=!1,this.isBack=!0},async imputationConfitm(){this.tableList.forEach(async(e,t)=>{if(e=Object(a["toRaw"])(e),0==e.status){let s;this.tableList[t].loading=!0,s=this.item1.address==this.currentNetwork.MainCoin.address?e.provider.sendTransaction({from:e.provider.address,to:e.getAddress,value:I["b"].parseUnits(this.price.toString(),18)}):e.contract.transfer(e.getAddress,I["b"].parseUnits(this.price.toString(),e.decimals),{gasPrice:I["b"].parseUnits(this.gWei.toString(),9),gasLimit:2e5}),s.then(e=>{e.wait().then(()=>{this.tableList[t].status=1,this.tableList[t].message="发送成功",this.tableList[t].loading=!1}).catch(e=>{console.log(t,e),this.tableList[t].status=0,this.tableList[t].message="发送失败",this.tableList[t].loading=!1})}).catch(e=>{console.log(t,e),this.tableList[t].status=0,this.tableList[t].message="发送失败",this.tableList[t].loading=!1})}})},tokenUpdate({name:e,symbol:t}){this.item1.name=e,this.item1.symbol=t},async tokenChange(e){this.item1=e},copyHandler(e){Object(M["a"])(e),Object(A["a"])({type:H("swap.success"),title:H("swap.success"),message:H("swap.copySuccess")})},toggleGwei(e){this.gWei=e},openTokensDialog(e){this.type=e,this.$refs.tokens.open()},loginFn(){this.setConnectDialog(!0)}}};s("665d");R.render=L,R.__scopeId="data-v-7924701a";var G=R;const F=e=>(Object(a["pushScopeId"])("data-v-664aac78"),e=e(),Object(a["popScopeId"])(),e),z={class:"flex-row-center flex-1 flex-start wrapper"},J={class:"swap-info PB-20 imputation"},$={class:"swap-item"},K={class:"swap-item__top flex-row-between"},q={class:"flex-row-start align-center pointer"},Q={class:"swap-item__top-icon MR-10"},X={class:"swap-item__top-name text-overflow__1"},Y={class:"swap-item"},Z={class:"swap-item__top flex-row-between"},ee={class:"flex-row-start align-center pointer"},te={class:"swap-item__top-icon MR-10"},se={class:"swap-item__top-name text-overflow__1"},ae={key:0,class:"flex-1 wrapper-box__back flex-column-start"},ne={class:"flex-h__1"},ce={class:"imputation-table"},ie=F(()=>Object(a["createElementVNode"])("th",null,"转换币",-1)),oe=F(()=>Object(a["createElementVNode"])("th",null,"被转换币",-1)),le=F(()=>Object(a["createElementVNode"])("th",null,"转换账号",-1)),re=F(()=>Object(a["createElementVNode"])("th",null,"执行结果",-1)),de={class:"swap-slippage MT-20"},be={class:"swap-slippage__select flex-row-between pointer"},me=F(()=>Object(a["createElementVNode"])("div",{class:"text-18"},"貔貅检测",-1)),pe={class:"flex-row-end"},ue={class:"swap-slippage MT-20"},he={class:"swap-slippage__select flex-row-between pointer"},Oe=F(()=>Object(a["createElementVNode"])("div",{class:"text-18"},"转换模式",-1)),ge={class:"flex-row-end"},je={class:"swap-slippage MT-20 MB-20"},we={class:"swap-slippage__select flex-row-between pointer"},ke=F(()=>Object(a["createElementVNode"])("div",{class:"text-18"},"GWEI",-1)),ye={class:"flex-row-end"},fe={class:"flex-row-between"},Ne={class:"text-blue"},ve={key:0,class:"MT-10"},Ve={class:"flex-row-between"},Ee=F(()=>Object(a["createElementVNode"])("div",null,"转换比例",-1)),xe={class:"text-blue"},Ce={key:1,class:"flex-row-start align-center MB-10 MT-10"},Te=F(()=>Object(a["createElementVNode"])("div",{class:"text-18 MR-30"},"转换数量",-1)),Be={class:"swap-item__input flex-1 flex-row-start align-center"},_e={class:"flex-row-start align-center"};function Le(e,t){const s=Object(a["resolveComponent"])("ArrowDown"),n=Object(a["resolveComponent"])("el-icon"),c=Object(a["resolveComponent"])("CopyDocument"),i=Object(a["resolveComponent"])("el-button"),l=Object(a["resolveComponent"])("Loading"),r=Object(a["resolveComponent"])("el-switch"),d=Object(a["resolveComponent"])("el-tag"),b=Object(a["resolveComponent"])("el-slider"),m=Object(a["resolveComponent"])("Back"),p=Object(a["resolveComponent"])("Tokens"),u=Object(a["resolveDirective"])("lazy");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",z,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["wrapper-box",{back:e.isBack}])},[Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("div",$,[Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",q,[Object(a["createElementVNode"])("div",{class:"flex-row-start align-center",onClick:t[0]||(t[0]=t=>e.openTokensDialog("item1"))},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",Q,null,512),[[u,e.getLogo(e.item1.address)]]),Object(a["createElementVNode"])("div",X,Object(a["toDisplayString"])(e.item1.symbol),1),Object(a["createVNode"])(n,{class:"ML-5"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1})]),Object(a["createVNode"])(n,{class:"ML-5",onClick:t[1]||(t[1]=t=>e.copyHandler(e.item1.address))},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c)]),_:1})])])]),Object(a["createElementVNode"])("img",{src:o.a,class:"swap-transform pointer",onClick:t[2]||(t[2]=(...t)=>e.transformHandler&&e.transformHandler(...t))}),Object(a["createElementVNode"])("div",Y,[Object(a["createElementVNode"])("div",Z,[Object(a["createElementVNode"])("div",ee,[Object(a["createElementVNode"])("div",{class:"flex-row-start align-center",onClick:t[3]||(t[3]=t=>e.openTokensDialog("item2"))},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",te,null,512),[[u,e.getLogo(e.item2.address)]]),Object(a["createElementVNode"])("div",se,Object(a["toDisplayString"])(e.item2.symbol),1),Object(a["createVNode"])(n,{class:"ML-5"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s)]),_:1})]),Object(a["createVNode"])(n,{class:"ML-5",onClick:t[4]||(t[4]=t=>e.copyHandler(e.item2.address))},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c)]),_:1})])])]),Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{class:"imputation-textarea","onUpdate:modelValue":t[5]||(t[5]=t=>e.sendAddress=t),placeholder:"请输入需要交换的私钥，一行一个"},null,512),[[a["vModelText"],e.sendAddress]]),Object(a["createVNode"])(i,{class:"swap-btn MT-10",disabled:!e.sendAddress,loading:e.searchLoading,onClick:e.searchHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("查询")]),_:1},8,["disabled","loading","onClick"])]),e.isBack?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ae,[Object(a["createElementVNode"])("div",ne,[Object(a["createElementVNode"])("table",ce,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[ie,oe,le,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.item1.symbol)+"余额",1),re])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tableList,(t,s)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:s},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.item1.symbol),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.item2.symbol),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.provider?e.showAddress(t.provider.address):"--"),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.balance||"--"),1),Object(a["createElementVNode"])("td",null,[t.loading?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0,class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l)]),_:1})):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.message),1)],64))])]))),128))])])]),Object(a["createElementVNode"])("div",de,[Object(a["createElementVNode"])("div",be,[me,Object(a["createElementVNode"])("div",pe,[Object(a["createVNode"])(r,{modelValue:e.braveTroopsTest,"onUpdate:modelValue":t[6]||(t[6]=t=>e.braveTroopsTest=t),size:"large",class:"swap-switch"},null,8,["modelValue"])])])]),Object(a["createElementVNode"])("div",ue,[Object(a["createElementVNode"])("div",he,[Oe,Object(a["createElementVNode"])("div",ge,[Object(a["createVNode"])(r,{modelValue:e.transformMode,"onUpdate:modelValue":t[7]||(t[7]=t=>e.transformMode=t),size:"large",class:"swap-switch","active-text":"数量模式","inactive-text":"比例模式"},null,8,["modelValue"])])])]),Object(a["createElementVNode"])("div",je,[Object(a["createElementVNode"])("div",we,[ke,Object(a["createElementVNode"])("div",ye,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.gWeiList,t=>(Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"swap-slippage__select-tag",type:"warning",effect:e.gWei==t?"dark":"light",onClick:s=>e.toggleGwei(t),key:t},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t),1)]),_:2},1032,["effect","onClick"]))),128)),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"swap-slippage__select-input",placeholder:"5","onUpdate:modelValue":t[8]||(t[8]=t=>e.gWei=t)},null,512),[[a["vModelText"],e.gWei,void 0,{number:!0}]])])])]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",fe,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.t("swap.tolerance")),1),Object(a["createElementVNode"])("div",Ne,Object(a["toDisplayString"])(e.progress)+"%",1)]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(b,{modelValue:e.progress,"onUpdate:modelValue":t[9]||(t[9]=t=>e.progress=t),min:1,max:99,onInput:e.progressChange},null,8,["modelValue","onInput"])])]),e.transformMode?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ce,[Te,Object(a["createElementVNode"])("div",Be,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"text-right flex-1","onUpdate:modelValue":t[11]||(t[11]=t=>e.price=t),placeholder:"0.00"},null,512),[[a["vModelText"],e.price]])])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ve,[Object(a["createElementVNode"])("div",Ve,[Ee,Object(a["createElementVNode"])("div",xe,Object(a["toDisplayString"])(e.transformRate)+"%",1)]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(b,{modelValue:e.transformRate,"onUpdate:modelValue":t[10]||(t[10]=t=>e.transformRate=t),min:1,max:99,onInput:e.progressChange},null,8,["modelValue","onInput"])])])),Object(a["createElementVNode"])("div",_e,[e.hasLoading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0,size:40,class:"pointer",onClick:t[12]||(t[12]=t=>e.isBack=!1)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(m)]),_:1})),Object(a["createVNode"])(i,{class:"swap-btn MT-10",loading:e.hasLoading,disabled:e.transformMode&&!e.price,onClick:e.swapHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("交换")]),_:1},8,["loading","disabled","onClick"])])])):Object(a["createCommentVNode"])("",!0)],2)]),Object(a["createVNode"])(p,{ref:"tokens",onChange:e.tokenChange,onUpdate:e.tokenUpdate},null,8,["onChange","onUpdate"])],64)}var De=s("76a2"),Me=s("dcd58");const{t:Se}=P["a"].global;var Ae={data(){return{t:Se,utils:I["b"],getLogo:W["d"],getBit:W["c"],progress:10,loading:!1,searchLoading:!1,transformMode:!1,braveTroopsTest:!1,transformRate:10,isBack:!1,gWei:5,gWeiList:[5,7,10,15,20],type:"",price:"",fee:"",txPrice:"",sendAddress:"",tableList:[],item1:{name:"BNB",symbol:"BNB",address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",balance:"",price:"",loading:!1},item2:{name:"BUSD",symbol:"BUSD",address:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",balance:"",price:"",loading:!1}}},components:{Tokens:D["a"]},watch:{"currentNetwork.ChainID":{immediate:!0,handler(){const{Token:e}=this.currentNetwork,t=e[0],s=e[1]||e[0];this.item1={...this.item1,...t},this.item2={...this.item2,...s},this.gWei=5*this.currentNetwork.GWEI,this.gWeiList=[5*this.currentNetwork.GWEI,7*this.currentNetwork.GWEI,10*this.currentNetwork.GWEI,15*this.currentNetwork.GWEI,20*this.currentNetwork.GWEI]}}},directives:{bit:{updated(e){e.value=e.value?Object(W["c"])(e.value,5):""}}},computed:{...Object(U["c"])(["currentNetwork","networkList","currentDex"]),hasLoading(){const e=this.tableList.find(e=>e.loading);return!!e}},methods:{...Object(U["b"])(["setCurrentDex","setConnectDialog"]),async searchHandler(){this.searchLoading=!0;const e=this.sendAddress.split("\n");let t;const s=[],a=[];for(let i=0;i<e.length;i++){const n=e[i];let o,l,r,d;try{o=window.wallet.getPrivateKeyProvider(n),d=window.wallet.initContract(this.item1.address,S,o),t||(t=await d.decimals()),this.item1.address==this.currentNetwork.MainCoin.address?a.push(o.getBalance()):a.push(d.balanceOf(o.address))}catch(c){l=-1,r=c.data?c.data.message||c.message:c.reason||c.message}s.push({provider:o,balance:0,status:l,message:r,contract:d,decimals:t,loading:!1})}const n=await Promise.allSettled(a);n.forEach((e,a)=>{"fulfilled"===e.status?(s[a].balance=Object(W["c"])(I["b"].formatUnits(e.value.toString(),t),6),s[a].status=0):(s[a].balance="",s[a].status=-1,s[a].message="余额查询失败")}),this.tableList=s,this.searchLoading=!1,this.isBack=!0},async getPath(e){const t=this.currentNetwork.TransferTokens.find(e=>e.address.toLocaleLowerCase()===this.item2.address.toLocaleLowerCase());let s=[];s=[window.wallet.ContractWETH.getAmountsOut(I["b"].parseUnits("1",e),[this.item1.address,this.item2.address])];let a=[[this.item1.address,this.item2.address]];this.intellectTest&&this.currentNetwork.TransferTokens.forEach(n=>{n.address!=this.item1.address&&n.address!=this.item2.address&&(a.push([this.item1.address,n.address,this.item2.address]),s.push(window.wallet.ContractWETH.getAmountsOut(I["b"].parseUnits("1",e),[this.item1.address,n.address,this.item2.address])),t||this.currentNetwork.TransferTokens.forEach(t=>{n.address!=t.address&&(a.push([this.item1.address,n.address,t.address,this.item2.address]),s.push(window.wallet.ContractWETH.getAmountsOut(I["b"].parseUnits("1",e),[this.item1.address,n.address,t.address,this.item2.address])))}))});const n=await Promise.allSettled(s);let c,i="";n.forEach((e,t)=>{const{status:s,value:a}=e;if("fulfilled"==s){const e=a[a.length-1];i?e.gt(i)&&(i=e,c=t):(i=e,c=t)}});const o=a[c];return o},getPrice(e,t){if(this.transformMode)return I["b"].parseUnits(this.price.toString(),e);{const s=t*this.transformRate/100;return I["b"].parseUnits(s.toString(),e)}},async swapHandler(){let e,t,s;for(let c=0;c<this.tableList.length;c++){this.tableList[c].loading=!0;const i=Object(a["toRaw"])(this.tableList[c]),o=window.wallet.initContract(Me["product"].SWAP_HELPER,De,i.provider);if(!t){const[e,a]=await Promise.all([o.callFee(),o.checkTxPrice()]);t=e,s=a}e||(e=await this.getPath(i.decimals));const l=this.getPrice(i.decimals,i.balance);let r=I["b"].parseUnits("0",18);r=r.add(t),this.braveTroopsTest&&(r=r.add(s)),this.item1.address===this.currentNetwork.MainCoin.address&&(r=r.add(l));try{o.estimateGas.manyTokensBuy(l,1,this.progress,this.braveTroopsTest,[i.provider.address],e,{value:r,gasPrice:I["b"].parseUnits(this.gWei.toString(),9)}).then(t=>{o.manyTokensBuy(l,1,this.progress,this.braveTroopsTest,[i.provider.address],e,{value:r,gasPrice:I["b"].parseUnits(this.gWei.toString(),9),gasLimit:t.mul(135).div(100)}).then(e=>{e.wait().then(()=>{this.tableList[c].status=1,this.tableList[c].loading=!1,this.tableList[c].message="转换成功"}).catch(e=>{console.log(e),this.tableList[c].status=-1,this.tableList[c].loading=!1,this.tableList[c].message=e.data?e.data.message||e.message:e.reason||e.message})}).catch(e=>{console.log(e),this.tableList[c].status=-1,this.tableList[c].loading=!1,this.tableList[c].message=e.data?e.data.message||e.message:e.reason||e.message})}).catch(e=>{console.log(e),this.tableList[c].status=-1,this.tableList[c].loading=!1,this.tableList[c].message=e.data?e.data.message||e.message:e.reason||e.message})}catch(n){console.log(n),this.tableList[c].status=-1,this.tableList[c].loading=!1,this.tableList[c].message=n.data?n.data.message||n.message:n.reason||n.message}}},showAddress(e){return"0x..."+e.slice(-4)},tokenUpdate({name:e,symbol:t}){this.item1.name=e,this.item1.symbol=t},async tokenChange(e){this.item1=e},copyHandler(e){Object(M["a"])(e),Object(A["a"])({type:Se("swap.success"),title:Se("swap.success"),message:Se("swap.copySuccess")})},toggleGwei(e){this.gWei=e},openTokensDialog(e){this.type=e,this.$refs.tokens.open()},transformHandler(){const e=Object(a["toRaw"])(this.item1);this.item1=Object(a["toRaw"])(this.item2),this.item2=e}}};s("6005"),s("0d93");Ae.render=Le,Ae.__scopeId="data-v-664aac78";var Ie=Ae,We={data(){return{activeName:"swap"}},components:{ImputationVue:G,SwapVue:Ie}};s("ddaa");We.render=c;t["default"]=We},"0c0d":function(e,t,s){},"0d93":function(e,t,s){"use strict";s("3fb0")},"30ed":function(e,t){e.exports="./images/transform5dc41586b2a3ba671b8cb88580863420.png"},"3dce":function(e,t,s){},"3fb0":function(e,t,s){},"5ac6":function(e,t,s){},6005:function(e,t,s){"use strict";s("5ac6")},"665d":function(e,t,s){"use strict";s("3dce")},"76a2":function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"callFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"checkTxPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUnlockTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"time","type":"uint256"}],"name":"lock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amountIn","type":"uint256"},{"internalType":"uint256","name":"count","type":"uint256"},{"internalType":"uint256","name":"slippage","type":"uint256"},{"internalType":"bool","name":"checkTax","type":"bool"},{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"address[]","name":"path","type":"address[]"}],"name":"manyTokensBuy","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"}],"name":"manyTransferETH","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"}],"name":"manyTransferToken","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"receiveERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"receiveETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"setCallFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"setTxPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unlock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},"9d65":function(e,t,s){},b468:function(e,t,s){"use strict";s("0c0d")},c64b:function(e,t,s){"use strict";var a=s("33a9");const n={class:"flex-column-start tokens-content"},c={class:"flex-row-start align-center"},i={class:"flex-h__1 tokens-list"},o={key:0,class:"tokens-list__import flex-row-start align-center PL-30 PR-30 PB-30 PT-30"},l={class:"flex-row-start flex-1 align-center"},r={class:"tokens-list__item-icon MR-10"},d={class:"tokens-list__import-name MR-10"},b={class:"tokens-list__import-desc"},m=["onClick"],p={class:"tokens-list__item-icon MR-10"},u={class:"flex-1"},h={class:"token-list__item-title"},O={class:"token-list__item-desc"},g={class:"token-list__item-price"};function j(e,t){const s=Object(a["resolveComponent"])("el-button"),j=Object(a["resolveComponent"])("Close"),w=Object(a["resolveComponent"])("el-icon"),k=Object(a["resolveComponent"])("el-dialog"),y=Object(a["resolveDirective"])("lazy");return Object(a["openBlock"])(),Object(a["createBlock"])(k,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),title:e.$t("swap.selectToken"),width:"420px","custom-class":"tokens"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",c,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"tokens-input flex-1","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTxt=t),placeholder:"Search name or paste address"},null,512),[[a["vModelText"],e.searchTxt,void 0,{trim:!0}]]),Object(a["createVNode"])(s,{class:"MR-20",onClick:t[1]||(t[1]=t=>e.fastImport()),disabled:!e.searchTxt||42!=e.searchTxt.length&&!e.importTokens.name},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("swap.fastImport")),1)]),_:1},8,["disabled"])]),Object(a["createElementVNode"])("div",i,[e.importTokens.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",r,null,512),[[y,e.getLogo(e.importTokens.address)]]),Object(a["createElementVNode"])("div",d,Object(a["toDisplayString"])(e.importTokens.name),1),Object(a["createElementVNode"])("div",b,Object(a["toDisplayString"])(e.importTokens.symbol),1)]),Object(a["createVNode"])(s,{class:"tokens-list__import-btn",onClick:e.importHandler},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("swap.import")),1)]),_:1},8,["onClick"])])):(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:1},Object(a["renderList"])(e.getTokens,(t,s)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"tokens-list__item pointer flex-row-start align-center pointer",key:t.address,onClick:s=>e.selectHandler(t)},[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",p,null,512),[[y,e.getLogo(t.address)]]),Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",h,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("div",O,Object(a["toDisplayString"])(t.symbol),1)]),Object(a["createElementVNode"])("div",g,Object(a["toDisplayString"])(t.balance?e.getBit(e.utils.formatUnits(t.balance,t.decimals||18),5):""),1),t.isAdd?(Object(a["openBlock"])(),Object(a["createBlock"])(w,{key:0,size:30,color:"#fff",class:"ML-10",onClick:Object(a["withModifiers"])(t=>e.removeTokens(s),["stop"])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j)]),_:2},1032,["onClick"])):Object(a["createCommentVNode"])("",!0)],8,m))),128))])])]),_:1},8,["modelValue","title"])}s("0e47");var w=s("1630"),k=s("90fe"),y=s("767c"),f={name:"Tokens",data(){return{utils:w["b"],getBit:k["c"],getLogo:k["d"],dialogVisible:!1,activeAddress:[],searchTxt:"",getTokens:[],importTokens:{},tokens:[],type:""}},computed:{...Object(y["c"])(["currentNetwork"])},async mounted(){const{outputCurrency:e,inputCurrency:t}=this.$route.query;e&&42==e.length&&(this.type="item2",await this.getCurrencyInfo(e),this.importHandler()),t&&42==t.length&&(this.type="item1",await this.getCurrencyInfo(t),this.importHandler()),this.type=""},watch:{"currentNetwork.ChainID":{immediate:!0,handler(){let e=localStorage.getItem(this.currentNetwork.ChainID+"tokens");this.tokens=e?JSON.parse(e):this.currentNetwork.Token,this.getTokens=Object(a["toRaw"])(this.tokens),this.getBalance()}},searchTxt(e){this.searchTxtChange(e)}},methods:{searchTxtChange(e){e||(this.getTokens=Object(a["toRaw"])(this.tokens));const t=this.tokens.filter(t=>{const{name:s,address:a}=t;return!(!s.toLocaleLowerCase().includes(e.toLocaleLowerCase())&&!a.toLocaleLowerCase().includes(e.toLocaleLowerCase()))});this.importTokens={},this.getTokens=Object(a["toRaw"])(t),t.length<=0&&42===e.length&&this.getCurrencyInfo(e)},fastImport(e,t=!0){e=e||this.searchTxt;const s=this.tokens.find(t=>t.address===e);if(s)this.selectHandler(s);else{this.importTokens={name:e.slice(0,6),symbol:e.slice(0,6),address:e,isAdd:!0},this.importHandler(t);const s=window.wallet.initContract(e),a=[s.name(),s.symbol()];Promise.all(a).then(([t,s])=>{this.updateTokenInfo(e,t,s)})}},updateTokenInfo(e,t,s){const a=this.tokens.findIndex(t=>t.address===e);a>=0&&(this.tokens[a].name=t,this.tokens[a].symbol=s);const n=this.getTokens.findIndex(t=>t.address===e);n>=0&&(this.getTokens[n].name=t,this.getTokens[n].symbol=s),this.$emit("update",{address:e,name:t,symbol:s}),localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))},removeTokens(e){const t=this.getTokens[e],s=this.tokens.findIndex(e=>t.address==e.address);this.tokens.splice(s,1),this.searchTxtChange(this.searchTxt),localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))},async getCurrencyInfo(e){const t=window.wallet.initContract(e),s=[t.name(),t.symbol(),t.decimals()];try{await Promise.all(s).then(([t,s,a])=>{this.importTokens={name:t,symbol:s,decimals:a,address:e,isAdd:!0}})}catch(a){Object(k["a"])(a)}},async getBalance(){if(!window.wallet.accounts[0]){for(let e=0;e<this.getTokens.length;e++)this.getTokens[e].balance="";return}let e=[];for(let t=0;t<this.getTokens.length;t++){const s=this.getTokens[t];let a;if(s.address===this.currentNetwork.MainCoin.address)a=window.wallet.provider.getBalance();else{const e=window.wallet.initContract(s.address);a=e.balanceOf(window.wallet.accounts[0])}e.push(a)}Promise.allSettled(e).then(e=>{e.forEach((e,t)=>{const{status:s,value:a}=e;this.getTokens[t].balance="fulfilled"===s?a:""})})},importHandler(e=!0){const t=this.tokens.find(e=>e.address===this.importTokens.address);!t&&e&&(this.tokens.push(this.importTokens),this.searchTxt="",localStorage.setItem(this.currentNetwork.ChainID+"tokens",JSON.stringify(this.tokens))),this.selectHandler(this.importTokens)},open(e){this.activeAddress=e,this.dialogVisible=!0,this.importTokens={},this.getBalance()},selectHandler(e){this.$emit("change",e,this.type),this.dialogVisible=!1,this.importTokens={}}}};s("b468");f.render=j;t["a"]=f},dcd58:function(e){e.exports=JSON.parse('{"evn":"product","product":{"WETH":"0x10ed43c718714eb63d5aa57b78b54704e256024e","STAKING":"0x019ec9259ed52fb80da94220b1fb52467e98afa0","ERC20":"0xc4fc54ebc66841443734930c680a69b099a0c15e","UNISWAP":"0x10ED43C718714eb63d5aA57B78B54704E256024E","RPC":"https://rpc.ankr.com/bsc","SWAP_HELPER":"0x99325Edf7355d8Bb70a01222Cf89e7A6545646b0","DOR":"0xee45d1ee94ca1c15f7f25f3bafe8edaec5ca5b7e","chain":{"chainId":"0x38","chainName":"Binance Smart Chain Mainnet"}},"test":{"BNB":"0x65e070E7c95C5cD72fd50d549135aE710097644D","STAKING":"0x019ec9259ed52fb80da94220b1fb52467e98afa0","ERC20":"0xc4fc54ebc66841443734930c680a69b099a0c15e","UNISWAP":"0x10ED43C718714eb63d5aA57B78B54704E256024E","RPC":"https://data-seed-prebsc-1-s1.binance.org:8545","SWAP_HELPER":"0x06E665AA112500D66d8B456505264BB6ea25CCEb","chain":{"chainId":"0x61","chainName":"Binance Smart Chain Testnet"}}}')},ddaa:function(e,t,s){"use strict";s("9d65")}}]);
//# sourceMappingURL=chunk-52dc46c2.0a0b1bae.js.map