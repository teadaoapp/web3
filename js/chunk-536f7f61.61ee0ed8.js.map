{"version":3,"sources":["webpack:///./node_modules/_core-js@3.25.4@core-js/internals/array-method-is-strict.js","webpack:///./node_modules/_core-js@3.25.4@core-js/modules/es.array.reduce.js","webpack:///./src/views/airdrop/index.vue","webpack:///./src/views/airdrop/index.vue?ca23","webpack:///./node_modules/_core-js@3.25.4@core-js/internals/array-reduce.js","webpack:///./src/views/airdrop/index.vue?2bf2","webpack:///./node_modules/_core-js@3.25.4@core-js/internals/engine-is-node.js"],"names":["fails","module","exports","METHOD_NAME","argument","method","call","$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","class","_createElementVNode","_createElementBlock","_hoisted_2","_ctx","onClick","_hoisted_5","_toDisplayString","_createVNode","_component_el_icon","color","size","_component_caret_bottom","_Transition","name","_hoisted_8","formatEther","_hoisted_11","$event","placeholder","_component_loading","_hoisted_14","symbol","_hoisted_18","formatUnits","balance","decimals","type","_component_el_tooltip","effect","content","placement","_component_QuestionFilled","_hoisted_23","_createBlock","_component_el_button","loading","window","Contract","IERC20ABI","airDropContract","contractERC20","data","utils","typesShow","isLogin","isApprove","approveLoading","loginLoading","feeAmount","BigNumber","from","tokenAddr","disListInfo","airdropLoading","searchLoading","price","ERC20Info","allowance","computed","disList","list","resList","split","i","item","arr","push","addr","totalPrice","forEach","isNaN","Number","watch","debounce","async","ERC20","$wallet","initContract","Promise","all","balanceOf","wallet","accounts","address","isZero","error","console","created","isLoginFn","on","methods","mapActions","product","SWAP_HELPER","ABI","callFee","then","val","getBnbBalance","provider","getBalance","clickOutside","toggleType","loginHandler","setConnectDialog","bool","dataVerify","res","totalSupply","tx","approve","wait","Tips","addrs","map","e","amounts","parseUnits","toString","sum","add","manyTransferToken","value","ElNotification","title","message","parseEther","totalAmount","manyTransferETH","status","substr","render","__scopeId","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","right","classof","global","process"],"mappings":"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","file":"js/chunk-536f7f61.61ee0ed8.js","sourcesContent":["'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\r\n  <div class=\"airdrop\">\r\n    <p class=\"text-20 text-white\">使用TeaDrop将您的代币空投给您的所有用户</p>\r\n    <div class=\"airdrop-content MT-20\">\r\n      <div v-click-outside=\"clickOutside\" class=\"airdrop-type flex-row-between pointer MB-20\" :class=\"{ 'type-show': typesShow }\" @click=\"typesShow = !typesShow\">\r\n        <div class=\"airdrop-type__left text-left\">\r\n          <div class=\"text-16 text-999\">空投类型</div>\r\n          <div class=\"text-18 text-white MT-5\">{{ type == 1 ? '其他代币' : 'BNB' }}</div>\r\n        </div>\r\n        <el-icon color=\"#fff\" :size=\"16\">\r\n          <caret-bottom />\r\n        </el-icon>\r\n        <transition name=\"el-zoom-in-top\">\r\n          <div v-show=\"typesShow\" class=\"airdrop-type__list\">\r\n            <div class=\"airdrop-type__list-item\" @click=\"toggleType(1)\">其他代币</div>\r\n            <div class=\"airdrop-type__list-item\" @click=\"toggleType(2)\">BNB</div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n      <div class=\"airdrop-desc text-left text-16 text-999 MB-15\">\r\n        <div class=\"airdrop-desc__title text-18 text-white MB-10\">空投说明：</div>\r\n        <div class=\"MT-5\">- 向任意数量的用户空投代币</div>\r\n        <div class=\"MT-5\">- 如果您正在进行销售，请确保代币没有空投</div>\r\n        <div class=\"MT-5\">- 先输入你的代币地址</div>\r\n        <div class=\"MT-5\">- 输入要空投的用户列表，后跟金额（逗号分隔）</div>\r\n      </div>\r\n      <div class=\"text-16 text-999 MB-15\">空投费用:{{ utils.formatEther(feeAmount)}} BNB</div>\r\n      <transition name=\"el-zoom-in-top\">\r\n        <div v-show=\"type == 1\" class=\"airdrop-type text-left MB-15\">\r\n          <div class=\"text-16 text-999\">请输入令牌地址</div>\r\n          <div class=\"flex-row-start MT-5 align-center\">\r\n            <input v-model.trim=\"tokenAddr\" class=\"airdrop-type__input text-18 text-white flex-1\" placeholder=\"请输入令牌地址\">\r\n            <el-icon v-show=\"searchLoading\" class=\"is-loading\" color=\"#fff\">\r\n              <loading />\r\n            </el-icon>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n      <div v-show=\"type == 1\" class=\"text-18 text-999 text-left\">\r\n        <span class=\"MR-5\">代币:</span>\r\n        <span class=\"text-yellow\">{{ ERC20Info.symbol }}({{ ERC20Info.name || '--' }})</span>\r\n      </div>\r\n      <div class=\"flex-row-between align-center\">\r\n        <div class=\"text-18 text-999 text-left MT-10\">\r\n          <span class=\"MR-5\">余额:</span>\r\n          <span v-if=\"type == 1\" class=\"text-yellow\">{{ utils.formatUnits(ERC20Info.balance, ERC20Info.decimals) }}</span>\r\n          <span v-else class=\"text-yellow\">{{ utils.formatEther(ERC20Info.balance) }}</span>\r\n        </div>\r\n        <div class=\"flex-row-end\">\r\n          <input type=\"text\" placeholder=\"请输入代币数量\" class=\"airdrop-input text-16 MR-10\" v-model.trim=\"price\" />\r\n          <el-tooltip\r\n            class=\"box-item\"\r\n            effect=\"dark\"\r\n            content=\"统一发放数量，为空则按照默认规则发放\"\r\n            placement=\"top\"\r\n          >\r\n            <el-icon><QuestionFilled /></el-icon>\r\n          </el-tooltip>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"airdrop-list MT-20\">\r\n        <textarea v-model.trim=\"disListInfo\" class=\"airdrop-list__textarea text-white text-18\" placeholder=\"输入分发列表\" />\r\n      </div>\r\n      <p class=\"text-yellow text-18 MT-10 MB-20\">为了获得最佳效果，我们建议您一次最多处理500个地址！</p>\r\n      <div class=\"text-18 text-999\">\r\n        空投的代币总数:\r\n        <span class=\"text-yellow\">{{ totalPrice }}</span>\r\n      </div>\r\n      <div class=\"flex-row-center MT-15\">\r\n        <el-button v-if=\"!isLogin\" class=\"btn btn-line color-text MR-18\" :loading=\"loginLoading\" @click=\"loginHandler\">Connect</el-button>\r\n        <el-button v-else-if=\"isApprove == 2\" class=\"btn btn-line color-text MR-18\" :loading=\"approveLoading\" @click=\"approveHandler\">APPROVE</el-button>\r\n        <el-button v-else-if=\"isApprove == 1\" class=\"btn\" :loading=\"airdropLoading\" @click=\"airdropHandler\">AIRDROP</el-button>\r\n        <el-button v-if=\"isApprove == 0 && type == 2\" class=\"btn\" :loading=\"airdropLoading\" @click=\"airdropETHHandler\">AIRDROP</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* global wallet */\r\n// import { CaretBottom, Loading } from '@element-plus/icons'\r\nimport { ElNotification } from 'element-plus'\r\nimport { debounce, Tips } from '@/libs/utils.js'\r\nimport { BigNumber, Contract, utils } from 'ethers'\r\nimport IERC20ABI from '@/api/abis/IERC20.json'\r\nimport ABI from '@/api/abis/SwapHelper.json'\r\nimport { product } from '@/plugins/wallet/config.json'\r\n\r\nimport { mapActions } from 'vuex'\r\nwindow.Contract = Contract\r\nwindow.IERC20ABI = IERC20ABI\r\nlet airDropContract = null\r\nlet contractERC20 = null\r\nexport default {\r\n  // components: {\r\n  //   CaretBottom,\r\n  //   Loading\r\n  // },\r\n  data() {\r\n    return {\r\n      utils: utils,\r\n      typesShow: false,\r\n      // 当前选中类型\r\n      type: 1,\r\n      // 是否有登陆\r\n      isLogin: false,\r\n      // 是否有授权 0: 未知 1:已授权 2:未授权\r\n      isApprove: 0,\r\n      // 授权loading\r\n      approveLoading: false,\r\n      // 登陆loading\r\n      loginLoading: false,\r\n      feeAmount: BigNumber.from(0),\r\n      // 合约地址\r\n      tokenAddr: '',\r\n      disListInfo: '',\r\n      // 空投loading\r\n      airdropLoading: false,\r\n      searchLoading: false,\r\n      price: '',\r\n      ERC20Info: {\r\n        name: '',\r\n        symbol: '',\r\n        decimals: 0,\r\n        balance: BigNumber.from(0),\r\n        allowance: BigNumber.from(0)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 格式化列表\r\n    disList() {\r\n      let list = []\r\n      const resList = []\r\n      if (this.disListInfo) {\r\n        list = this.disListInfo.split('\\n')\r\n      }\r\n      for (let i = 0; i < list.length; i++) {\r\n        const item = list[i]\r\n        const arr = item.split(',')\r\n        resList.push({\r\n          addr: arr[0],\r\n          price: this.price || arr[1]\r\n        })\r\n      }\r\n      return resList\r\n    },\r\n    // 统计总金额\r\n    totalPrice() {\r\n      let totalPrice = 0\r\n      this.disList.forEach((item) => {\r\n        const price = item.price\r\n        if (price && !isNaN(price)) {\r\n          totalPrice += Number(price)\r\n        }\r\n      })\r\n      return totalPrice\r\n    }\r\n  },\r\n  watch: {\r\n    tokenAddr: debounce(async function() {\r\n      this.searchLoading = true\r\n      // TODO 搜索接口\r\n      try {\r\n        const ERC20 = this.$wallet.initContract(this.tokenAddr, IERC20ABI)\r\n        const [name, symbol, decimals, balance, allowance] = await Promise.all([\r\n          ERC20.name(),\r\n          ERC20.symbol(),\r\n          ERC20.decimals(),\r\n          ERC20.balanceOf(wallet.accounts[0]),\r\n          ERC20.allowance(wallet.accounts[0], airDropContract.address)\r\n        ])\r\n        this.ERC20Info = { name, symbol, decimals, balance }\r\n        this.isApprove = allowance.isZero() ? 2 : 1\r\n        contractERC20 = ERC20\r\n      } catch (error) {\r\n        console.error(error)\r\n        this.ERC20Info = {\r\n          name: '',\r\n          symbol: '',\r\n          decimals: 0,\r\n          balance: BigNumber.from(0),\r\n          allowance: BigNumber.from(0)\r\n        }\r\n        this.isApprove = 2\r\n        contractERC20 = null\r\n      }\r\n      this.searchLoading = false\r\n    }, 500)\r\n  },\r\n  created() {\r\n    this.isLoginFn()\r\n    this.$wallet.on('accountChange', () => {\r\n      this.isLoginFn()\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapActions(['setConnectDialog']),\r\n    // 是否登陆\r\n    async isLoginFn() {\r\n      if (this.$wallet.accounts[0]) {\r\n        this.isApprove = 0\r\n        this.isLogin = true\r\n        airDropContract = window.wallet.initContract(product.SWAP_HELPER, ABI)\r\n        airDropContract.callFee().then((val) => {\r\n          this.feeAmount = val\r\n        })\r\n      } else {\r\n        this.isLogin = false\r\n      }\r\n    },\r\n    // 获取BNB余额\r\n    getBnbBalance() {\r\n      airDropContract.provider.getBalance(wallet.accounts[0]).then((data) => {\r\n        this.ERC20Info = { name: 'BNB', balance: data }\r\n      })\r\n    },\r\n    clickOutside() {\r\n      this.typesShow = false\r\n    },\r\n    /**\r\n     * 切换类型\r\n     * @param {Number} type 当前选中类型 1:Aindrop Tokens 2:BNB\r\n     */\r\n    toggleType(type) {\r\n      this.type = type\r\n      this.ERC20Info = {\r\n        name: '',\r\n        symbol: '',\r\n        decimals: 0,\r\n        balance: BigNumber.from(0),\r\n        allowance: BigNumber.from(0)\r\n      }\r\n      if (type === 2) {\r\n        this.getBnbBalance()\r\n      }\r\n    },\r\n    // 登陆\r\n    loginHandler() {\r\n      this.setConnectDialog(true)\r\n    },\r\n    // 授权\r\n    async approveHandler() {\r\n      // TODO 授权接口\r\n      const bool = this.dataVerify()\r\n      if (!bool) {\r\n        return\r\n      }\r\n      this.approveLoading = true\r\n      try {\r\n        const res = await contractERC20.totalSupply()\r\n        const tx = await contractERC20.approve(airDropContract.address, res)\r\n        await tx.wait()\r\n        this.isApprove = 1\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.approveLoading = false\r\n    },\r\n    // 空投\r\n    async airdropHandler() {\r\n      this.airdropLoading = true\r\n      // TODO 调用空投接口\r\n      try {\r\n        const { address } = contractERC20\r\n        const addrs = this.disList.map((e) => e.addr)\r\n        const amounts = this.disList.map((e) => utils.parseUnits(e.price.toString(), this.ERC20Info.decimals))\r\n        // 初始值是手续费  求和数组\r\n        const totalAmount = amounts.reduce((sum, item) => sum.add(item))\r\n        const tx = await airDropContract.manyTransferToken(address, addrs, amounts, { value: this.feeAmount,  })\r\n        await tx.wait()\r\n        ElNotification({\r\n          type: 'success',\r\n          title: 'Success',\r\n          message: 'Airdrop Success'\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.airdropLoading = false\r\n    },\r\n    // 空投发送BNB\r\n    async airdropETHHandler() {\r\n      this.airdropLoading = true\r\n      // TODO 调用空投接口\r\n      try {\r\n        const addrs = this.disList.map((e) => e.addr)\r\n        const amounts = this.disList.map((e) => utils.parseEther(e.price.toString()))\r\n        // 初始值是手续费  求和数组\r\n        const totalAmount = amounts.reduce((sum, item) => sum.add(item), this.feeAmount)\r\n        const tx = await airDropContract.manyTransferETH(addrs, amounts, { value: totalAmount })\r\n        await tx.wait()\r\n        ElNotification({\r\n          type: 'success',\r\n          title: 'Success',\r\n          message: 'Airdrop Success'\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n        Tips(error)\r\n      }\r\n      this.airdropLoading = false\r\n    },\r\n    // 授权数据校验\r\n    dataVerify() {\r\n      if (!this.tokenAddr) {\r\n        ElNotification({\r\n          type: 'error',\r\n          title: 'Tips',\r\n          message: 'Please Enter Token Address'\r\n        })\r\n        return false\r\n      }\r\n      if (this.disList.length <= 0) {\r\n        ElNotification({\r\n          type: 'error',\r\n          title: 'Tips',\r\n          message: 'Please Enter Distribution List'\r\n        })\r\n        return false\r\n      }\r\n\r\n      let status = true\r\n      for (let i = 0; i < this.disList.length; i++) {\r\n        const { addr, price } = this.disList[i]\r\n        if (addr.substr(0, 2) !== '0x' || addr.length !== 42 || !price) {\r\n          ElNotification({\r\n            type: 'error',\r\n            title: 'Tips',\r\n            message: `The format of line ${i + 1} is wrong, please check the vehicle`\r\n          })\r\n          status = false\r\n          break\r\n        }\r\n      }\r\n      return status\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  \r\n.btn {\r\n  height: 38px;\r\n  line-height: 38px;\r\n  font-size: 16px;\r\n  min-height: 0;\r\n  background: linear-gradient(-68deg, #ffd60d, #dff522);\r\n  border-radius: 19px;\r\n  border: none;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  color: #3a382e;\r\n  transition: all 0.3s;\r\n  &.btn-line {\r\n    border: 1px solid #ffd60d;\r\n    background: linear-gradient(-68deg, #978dbe 0%, #ffd60d 0%, #dff522 100%);\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n  }\r\n  &:hover {\r\n    transform: scale(0.95);\r\n    color: #3a382e;\r\n  }\r\n}\r\n\r\n.airdrop-input{\r\n  background: none;\r\n  border: 1px solid #2A2A2A;\r\n  height: 30px;\r\n  border-radius: 8px;\r\n  color: #fff;\r\n  padding: 0 10px;\r\n  width: 130px;\r\n}\r\n\r\n.airdrop {\r\n  width: 95%;\r\n  max-width: 8rem;\r\n  margin: 10px auto;\r\n  text-align: center;\r\n  .airdrop-content {\r\n    width: 100%;\r\n    border-radius: 20px;\r\n    padding: 20px;\r\n    border: 1px solid #2A2A2A;\r\n    background-color: rgba(39, 39, 39, 0.8);\r\n    .airdrop-type {\r\n      padding: 5px 15px 7px;\r\n      border: 1px solid rgba(255, 255, 255, 0.42);\r\n      border-radius: 7px;\r\n      position: relative;\r\n      &.type-show {\r\n        border-bottom-color: transparent;\r\n        border-bottom-left-radius: 0;\r\n        border-bottom-right-radius: 0;\r\n      }\r\n      .airdrop-type__input {\r\n        width: 100%;\r\n        background: none;\r\n      }\r\n      .airdrop-type__list {\r\n        position: absolute;\r\n        left: -1px;\r\n        right: -1px;\r\n        top: 100%;\r\n        background: #25241e;\r\n        box-shadow: #393730 0 15px 15px;\r\n        border: 1px solid rgba(255, 255, 255, 0.42);\r\n        border-top: none;\r\n        border-bottom-left-radius: 0.07rem;\r\n        border-bottom-right-radius: 0.07rem;\r\n        .airdrop-type__list-item {\r\n          height: 50px;\r\n          line-height: 50px;\r\n          color: #fff;\r\n          font-size: 14px;\r\n          cursor: pointer;\r\n          transition: all 0.3s;\r\n          text-align: left;\r\n          padding-left: 15px;\r\n          &:hover {\r\n            background: #636259;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .airdrop-list {\r\n      height: 200px;\r\n      border: 1px solid #ffffff;\r\n      border: 1px solid rgba(255, 255, 255, 0.42);\r\n      border-radius: 7px;\r\n      padding: 10px;\r\n      .airdrop-list__textarea {\r\n        width: 100%;\r\n        height: 100%;\r\n        background: none;\r\n        resize: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=6a13b93f&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6a13b93f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6a13b93f\"\n\nexport default script","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","export { default } from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6a13b93f&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6a13b93f&lang=scss&scoped=true\"","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n"],"sourceRoot":""}