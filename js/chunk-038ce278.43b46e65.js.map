{"version":3,"sources":["webpack:///./src/views/presale/index.vue","webpack:///./src/views/presale/index.vue?d29a","webpack:///./src/views/presale/index.vue?31aa","webpack:///./src/assets/images/dor.jpg"],"names":["class","_createElementVNode","href","target","src","_imports_0","_createElementBlock","_toDisplayString","_ctx","formatUnits","_createBlock","_component_el_icon","_createVNode","_component_Loading","_component_el_button","disabled","onClick","_hoisted_4","data","utils","getBit","isLogin","availableNum","contract","loading","mounted","this","window","wallet","accounts","loginCallBack","on","methods","mapActions","initContract","PRESALE_ABI","tokenAddress","whitelistNumber","getNumberOfWhitelistedUsers","then","console","log","Number","BigInt","finally","getWhitelistedUsers","poolSettings","poolStates","publicSaleStartTime","getContributionSettings","max","min","claimedOf","owner","parseUnits","error","Tips","render","__scopeId","module","exports"],"mappings":"6QACOA,MAAM,wB,GACJA,MAAM,W,GAMNA,MAAM,gB,QAIPC,gCAGI,KAHDC,KAAK,8FAA8FC,OAAO,QAAQH,MAAM,2DAA3H,CACIC,gCAAqD,OAAhDG,IAAAC,IAA8BL,MAAM,aACzCC,gCAAiC,OAA5BD,MAAM,QAAO,eAFtB,I,yLAXNM,gCAgBM,MAhBN,EAgBM,CAfJL,gCAKM,MALN,EAKM,8BALe,aACRM,6BAAEC,SAAOA,QAAMC,YAAYD,eAAY,QAAY,IAC5D,GAAkCA,oCAAlCE,yBAEUC,EAAA,C,MAFDX,MAAM,cAAf,C,6BACI,IAAW,CAAXY,yBAAWC,K,OADf,yCAIJZ,gCAQM,MARN,EAQM,CAN6DO,oCAA/DE,yBAAgHI,EAAA,C,MAArGd,MAAM,UAAWe,SAAUP,gBAAY,EAAuBQ,QAAOR,oBAAhF,C,6BAAkG,IAAE,8BAAF,Q,KAAlG,qDACAE,yBAAkFI,EAAA,C,MAAvEd,MAAM,UAAkBgB,QAAK,eAAER,oBAAgB,KAA1D,C,6BAAkE,IAAI,8BAAJ,U,OAClES,M,iEAiBO,GACXC,OACI,MAAO,CACHC,aACAC,cACAC,SAAS,EACTC,aAAc,EACdC,SAAU,KACVC,SAAS,IAGjBC,UACIC,KAAKL,UAAUM,OAAOC,OAAOC,SAAS,GACtCH,KAAKL,SAAWK,KAAKI,gBACrBH,OAAOC,OAAOG,GAAG,gBAAiB,KAC9BL,KAAKL,UAAUM,OAAOC,OAAOC,SAAS,GACtCH,KAAKL,SAAWK,KAAKI,mBAG7BE,QAAS,IACFC,eAAW,CAAC,qBACfH,gBACIJ,KAAKH,SAAWI,OAAOC,OAAOM,aAAa,6CAA8CC,GACzFT,KAAKF,SAAU,GAInB,yBACI,IAII,IA2BIY,EA3BAC,EAAkB,QAEhBX,KAAKH,SAASe,8BAA8BC,KAAKrB,IAEnDsB,QAAQC,IAAI,QAAQC,OAAQC,OAAQzB,KACpCmB,EAAiBK,OAAQC,OAAQzB,MAElC0B,QAAQ,QAIRP,EAAgB,SACTX,KAAKH,SAASsB,oBAAoB,EAAG,GAAGN,KAAKrB,IAC3CsB,QAAQC,IAAIvB,KACb0B,QAAQ,cAcblB,KAAKH,SAASuB,eAAeP,KAAKrB,IACpCsB,QAAQC,IAAK,SAAUvB,GACvBkB,EAAelB,EAAK,KAErB0B,QAAQ,cAILlB,KAAKH,SAASwB,aAAaR,KAAKrB,IAClCsB,QAAQC,IAAK,SAAUvB,GACvBsB,QAAQC,IAAK,YAAYE,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,IAAIyB,OAAQzB,EAAK,KAC7IsB,QAAQC,IAAK,OAAOE,OAAOzB,EAAK8B,wBAChCJ,QAAQ,cAILlB,KAAKH,SAAS0B,0BAA0BV,KAAKrB,IAC/CsB,QAAQC,IAAI,UAAUtB,OAAMV,YAAYS,EAAKgC,KAAK,KAAK/B,OAAMV,YAAYS,EAAKiC,QAC/EP,QAAQ,cAILlB,KAAKH,SAAS6B,UAAUzB,OAAOC,OAAOC,SAAS,IAAIU,KAAKrB,IAC1DsB,QAAQC,IAAI,YAAYtB,OAAMV,YAAYS,EAAK,OAChD0B,QAAQ,cAGLlB,KAAKH,SAAS8B,QAAQd,KAAKrB,IAC7BsB,QAAQC,IAAI,YAAYvB,KACzB0B,QAAQ,QAISzB,OAAMmC,WAAW,MAAO,IAY9C,MAAOC,GACPC,eAAKD,O,UClInB,EAAOE,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,69bCRf,W,qBCAAC,EAAOC,QAAU,oD","file":"js/chunk-038ce278.43b46e65.js","sourcesContent":["<template>\r\n  <div class=\"dor flex-row-between\">\r\n    <div class=\"text-32\">\r\n        可领取DOR数量：{{getBit(utils.formatUnits(availableNum, 18), 5) }}\r\n        <el-icon class=\"is-loading\" v-if=\"loading\">\r\n            <Loading />\r\n        </el-icon>\r\n    </div>\r\n    <div class=\"flex-row-end\">\r\n\r\n        <el-button class=\"dor-btn\" :disabled=\"availableNum <= 0\" v-if=\"isLogin\" @click=\"availableHandler\">领取</el-button>\r\n        <el-button class=\"dor-btn\" v-else @click=\"setConnectDialog(true)\">链接钱包</el-button>\r\n        <a href=\"https://teadao.app/#/swap/Pancake?outputCurrency=0x23766cb8a96ff2f46f664bc7d088a6306de73618\" target=\"_bank\" class=\"flex-column-center align-center buy pointer text-center\">\r\n            <img src=\"@/assets/images/dor.jpg\" class=\"buy-icon\"/>\r\n            <div class=\"MT-5\">Buy Token</div>\r\n        </a>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport { product } from '@/plugins/wallet/config.json'\r\nimport PRESALE_ABI from '@/api/abis/presale.json'\r\nimport { utils } from 'ethers'\r\nimport { getBit, Tips } from '../../libs/utils'\r\nimport { ElNotification } from 'element-plus'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            utils,\r\n            getBit,\r\n            isLogin: false,\r\n            availableNum: 1,\r\n            contract: null,\r\n            loading: false\r\n        }\r\n    },\r\n    mounted() {\r\n        this.isLogin = window.wallet.accounts[0] ? true : false\r\n        this.isLogin && this.loginCallBack()\r\n        window.wallet.on('accountChange', () => {\r\n            this.isLogin = window.wallet.accounts[0] ? true : false\r\n            this.isLogin && this.loginCallBack()\r\n        })\r\n    },\r\n    methods: {\r\n        ...mapActions(['setConnectDialog']),\r\n        loginCallBack() {\r\n            this.contract = window.wallet.initContract(\"0x829e67f327b7283C44734518C7E83b135a703b74\", PRESALE_ABI)\r\n            this.loading = true\r\n\r\n        },\r\n        // 领取奖励\r\n        async availableHandler() {\r\n            try {\r\n                \r\n                \r\n                \r\n                let whitelistNumber = 0;\r\n                //获取白名单数量\r\n                await this.contract.getNumberOfWhitelistedUsers().then(data => {\r\n                    \r\n                    console.log(\"白名单数量\",Number( BigInt( data)));\r\n                    whitelistNumber= Number( BigInt( data));\r\n                    \r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                //白名单列表\r\n                if(whitelistNumber>0){\r\n                    await this.contract.getWhitelistedUsers(0, 2).then(data => {\r\n                            console.log(data);\r\n                        }).finally(() => {\r\n                            //this.loading = false\r\n                        })\r\n                    //是否在白名单内需要遍历列表\r\n                    /*\r\n                    await this.contract.getWhitelistedUsers('0xee5BdaF4d66342AB01be87B21282cDEfE83B9682').then(data => {\r\n                        \r\n                        console.log( \"是否在白名单\",data);\r\n                    }).finally(() => {\r\n                        //this.loading = false\r\n                    })*/\r\n                }\r\n                //Token 开启时间 软顶硬顶 基础参数 锁仓日期\r\n                let tokenAddress;\r\n                await this.contract.poolSettings().then(data => {\r\n                    console.log( \"基础预售信息\",(data));\r\n                    tokenAddress = data[0];\r\n                    \r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                //获取详细\r\n                await this.contract.poolStates().then(data => {\r\n                    console.log( \"其他预售信息\",(data));\r\n                    console.log( \"其他预售信息1~7\",BigInt (data[1]),BigInt (data[2]),BigInt (data[3]),BigInt (data[4]),BigInt (data[5]),BigInt (data[6]),BigInt (data[7]));\r\n                   console.log( \"启动时间\",BigInt(data.publicSaleStartTime));\r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                //最大购买\r\n                await this.contract.getContributionSettings().then(data => {\r\n                    console.log(\"购买限制 最大\",utils.formatUnits(data.max),\"最小\",utils.formatUnits(data.min));\r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                //contributionOf\r\n                await this.contract.claimedOf(window.wallet.accounts[0]).then(data => {\r\n                    console.log(\"可以获得的代币数量\",utils.formatUnits(data,18));\r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                await this.contract.owner().then(data => {\r\n                    console.log(\"可以获得的代币数量\",data);\r\n                }).finally(() => {\r\n                    //this.loading = false\r\n                })\r\n                //买币\r\n                let payableAmount = utils.parseUnits(\"0.1\", 18)\r\n                \r\n               /*\r\n                await this.contract.contribute({\r\n                    value: payableAmount,\r\n                    gasPrice: utils.parseUnits(\"5\", 9),\r\n                    gasLimit: gaslimit.mul(135).div(100)\r\n                });*/\r\n                //领币\r\n                /*\r\n                    await this.contract.claim();\r\n                */\r\n            } catch (error) {\r\n              Tips(error)  \r\n            }   \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dor{\r\n    width: 600px;\r\n    max-width: 100%;\r\n    margin: 50px auto;\r\n    .dor-btn{\r\n        height: 50px;\r\n        background: #FCBE2F;\r\n        border: 1px solid #2A2A2A;\r\n        border-radius: 8px;\r\n        width: 100px;\r\n        color: #fff;\r\n        &.is-disabled{\r\n        background: #e4e7ed;\r\n        }\r\n    }\r\n}\r\n.buy{\r\n    width: 80px;\r\n    .buy-icon{\r\n        width: 25px;\r\n        height: 25px;\r\n    }\r\n}\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=25e74ee4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=25e74ee4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-25e74ee4\"\n\nexport default script","export { default } from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=25e74ee4&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=25e74ee4&lang=scss&scoped=true\"","module.exports = \"./images/dor6d691649be92cedd27e8f46f98346532.jpg\";"],"sourceRoot":""}