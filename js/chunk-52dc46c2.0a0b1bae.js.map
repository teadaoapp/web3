{"version":3,"sources":["webpack:///./src/views/tools/index.vue","webpack:///./src/views/tools/components/Imputation.vue","webpack:///./src/views/tools/components/Imputation.vue?6ce6","webpack:///./src/views/tools/components/Swap.vue","webpack:///./src/views/tools/components/Swap.vue?b98b","webpack:///./src/views/tools/index.vue?ed27","webpack:///./src/views/tools/components/Swap.vue?46d6","webpack:///./src/assets/images/transform.png","webpack:///./src/views/tools/components/Swap.vue?454d","webpack:///./src/views/tools/components/Imputation.vue?3e44","webpack:///./src/views/swap/modal/tokens.vue?1f29","webpack:///./src/views/swap/modal/tokens.vue","webpack:///./src/views/swap/modal/tokens.vue?8430","webpack:///./src/views/tools/index.vue?e929"],"names":["class","_createElementBlock","_createVNode","_component_el_tabs","_ctx","$event","_component_el_tab_pane","label","name","lazy","_component_ImputationVue","_component_SwapVue","_createElementVNode","src","_imports_0","onClick","address","_toDisplayString","symbol","_component_el_icon","_component_ArrowDown","_component_CopyDocument","_component_el_switch","placeholder","_hoisted_9","type","_component_el_button","disabled","loading","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","_renderList","item","index","key","provider","getAddress","balance","_createBlock","_component_Loading","message","_hoisted_17","_hoisted_21","_component_el_tag","effect","size","_component_Back","_component_Tokens","ref","onChange","onUpdate","t","i18n","global","data","utils","getLogo","getBit","toOne","isBack","price","activeName","progress","imputationLoading","gWei","gWeiList","sendAddress","getAddressOne","tableList","item1","components","Tokens","watch","immediate","handler","Token","this","currentNetwork","item2","GWEI","directives","bit","updated","el","value","computed","mapGetters","methods","mapActions","showAddress","slice","sendList","split","decimals","getList","checkStatus","length","ElNotification","title","i","list","promises","status","contract","window","wallet","getPrivateKeyProvider","initContract","BLKTokenABI","MainCoin","push","getBalance","balanceOf","error","console","log","reason","Promise","allSettled","forEach","formatUnits","toString","async","toRaw","promise","sendTransaction","from","to","parseUnits","transfer","gasPrice","gasLimit","then","tx","wait","catch","err","tokenUpdate","copyHandler","text","copy","toggleGwei","openTokensDialog","$refs","tokens","open","loginFn","setConnectDialog","render","__scopeId","_hoisted_16","_hoisted_18","_hoisted_19","_hoisted_22","_hoisted_26","active-text","inactive-text","_hoisted_30","_component_el_slider","min","max","onInput","_hoisted_39","_hoisted_36","searchLoading","transformMode","braveTroopsTest","transformRate","fee","txPrice","hasLoading","find","bool","TransferTokens","toLocaleLowerCase","ContractWETH","getAmountsOut","addressPath","intellectTest","sub","lastIndex","result","last","gt","path","getPrice","res","product","SWAP_HELPER","ABI","one","two","all","callFee","checkTxPrice","getPath","valueBigNumber","add","estimateGas","manyTokensBuy","mul","div","transformHandler","ImputationVue","SwapVue","module","exports","_component_el_dialog","width","custom-class","isAdd","color","_component_Close","dialogVisible","activeAddress","searchTxt","getTokens","importTokens","outputCurrency","inputCurrency","$route","query","getCurrencyInfo","importHandler","localStorage","getItem","ChainID","JSON","parse","val","searchTxtChange","filter","includes","fastImport","addr","selectHandler","updateTokenInfo","tokensIndex","findIndex","$emit","setItem","stringify","removeTokens","tokenIndex","child","splice","Tips","accounts"],"mappings":"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","file":"js/chunk-52dc46c2.0a0b1bae.js","sourcesContent":["<template>\r\n  <div class=\"tool\">\r\n    <el-tabs v-model=\"activeName\" class=\"swap-tabs\">\r\n      <el-tab-pane label=\"归集\" name=\"imputation\" lazy>\r\n        <ImputationVue />\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"批量Swap\" name=\"swap\" lazy>\r\n        <SwapVue />\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n  \r\n</template>\r\n\r\n\r\n\r\n<script>\r\n  import ImputationVue from './components/Imputation.vue'\r\n  import SwapVue from './components/Swap.vue'\r\n  export default {\r\n    data() {\r\n      return {\r\n        activeName: 'swap',\r\n      }\r\n    },\r\n    components: {\r\n      ImputationVue,\r\n      SwapVue\r\n    }\r\n  }\r\n  </script>\r\n\r\n\r\n<style lang=\"scss\">\r\n  .el-slider__bar{\r\n    background: rgba(252, 190, 47, 1);\r\n  }\r\n  .el-slider__button{\r\n    border-color: rgba(252, 190, 47, 1);\r\n  }\r\n  .swap-item__desc{\r\n    font-weight: normal;\r\n  }\r\n  .swap-tabs{\r\n    margin: 0 20px;\r\n    width: auto;\r\n    max-width: 100%;\r\n    .el-tab-pane{\r\n      display: flex;\r\n      align-items: flex-start;\r\n    }\r\n    .el-tabs__item{\r\n      color: #fff;\r\n    }\r\n    .el-tabs__item.is-active{\r\n      color: #FCBE2F !important;\r\n    }\r\n    .el-tabs__active-bar{\r\n      background: #FCBE2F !important;\r\n    }\r\n    .el-tabs__nav-wrap::after{\r\n      display: none;\r\n    }\r\n    .el-tabs__active-bar{\r\n      background: #fff;\r\n    }\r\n  }\r\n  .swap-slippage__select-input{\r\n    width: 40px;\r\n    height: 20px;\r\n    background: none;\r\n    border-radius: 4px;\r\n    border: 1px solid #898989;\r\n    text-align: center;\r\n    color: #fff;\r\n  }\r\n  .swap-slippage__select-tag{\r\n    height: 20px;\r\n    line-height: 18px;\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  \r\n  .swap-info{\r\n    width: 430px;\r\n    max-width: 100%;\r\n    border: 1px solid #2A2A2A;\r\n    border-radius: 18px;\r\n    position: relative;\r\n    z-index: 10;\r\n    background: #181818;\r\n    .swap-top{\r\n      border-bottom: 1px solid rgba(42, 42, 42, 1);\r\n      position: relative;\r\n      text-align: center;\r\n      padding: 10px;\r\n      .swap-top__icon{\r\n        position: absolute;\r\n        left: 30px;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 24px;\r\n        height: 19px;\r\n        &.right{\r\n          left: auto;\r\n          right: 30px;\r\n        }\r\n        &.rpc{\r\n          width: 28px;\r\n          height: 28px;\r\n          left: auto;\r\n          right: 70px;\r\n          top: 57%;\r\n        }\r\n        &.auto-rpc{\r\n          width: 28px;\r\n          height: 28px;\r\n          left: auto;\r\n          right: 20px;\r\n          top: 57%;\r\n        }\r\n      }\r\n      .swap-info__title{\r\n        font-size: 20px;\r\n        color: #fff;\r\n      }\r\n      .swap-info__title-info{\r\n        font-size: 14px;\r\n        color: rgba(255, 243, 204, 1);\r\n      }\r\n    }\r\n    .swap-item{\r\n      padding: 10px 20px;\r\n    }\r\n    .swap-item__top{\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n      .swap-item__top-icon{\r\n        width: 30px;\r\n        height: 30px;\r\n      }\r\n      .swap-item__top-wallet{\r\n        width: 20px;\r\n        height: auto;\r\n      }\r\n      .swap-item__top-name{\r\n        max-width: 60px;\r\n      }\r\n    }\r\n    .swap-transform{\r\n      width: 40px;\r\n      height: 40px;\r\n      margin: 5px auto;\r\n    }\r\n    .text-yellow{\r\n      font-size: 12px;\r\n      color: rgba(240, 185, 11, 1);\r\n    }\r\n    .text-blue{\r\n      font-size: 16px;\r\n      color: rgba(31, 199, 213, 1);\r\n    }\r\n    .text-16{\r\n      font-size: 16px;\r\n    }\r\n    .text-14{\r\n      font-size: 14px;\r\n    }\r\n    .swap-slippage__select{\r\n      background: #1B1B1B;\r\n      border: 1px solid #2A2A2A;\r\n      border-radius: 8px;\r\n      padding: 10px 20px;\r\n    }\r\n    \r\n  }\r\n  \r\n</style>","<template>\r\n    <div class=\"flex-row-center flex-1 flex-start wrapper\">\r\n      <div class=\"wrapper-box\" :class=\"{'back': isBack}\">\r\n        <div class=\"swap-info PB-20 imputation\">\r\n        <div class=\"swap-item\">\r\n            <div class=\"swap-item__top flex-row-between\">\r\n            <div class=\"flex-row-start align-center pointer\">\r\n                <div class=\"flex-row-start align-center\" @click=\"openTokensDialog('item1')\">\r\n                <img v-lazy=\"getLogo(item1.address)\" class=\"swap-item__top-icon MR-10\"/>\r\n                <div class=\"swap-item__top-name text-overflow__1\">{{item1.symbol}}</div>\r\n                <el-icon class=\"ML-5\">\r\n                    <ArrowDown />\r\n                </el-icon>\r\n                </div>\r\n                <el-icon class=\"ML-5\" @click=\"copyHandler(item1.address)\"><CopyDocument /></el-icon>\r\n            </div>\r\n            <div class=\"swap-item__desc text-20 flex-row-end align-center\">\r\n                开启多对单<el-switch v-model=\"toOne\" class=\"ML-10\"/>\r\n            </div>\r\n            </div>\r\n            \r\n        </div>\r\n        \r\n        <textarea class=\"imputation-textarea\" v-model=\"sendAddress\" placeholder=\"请输入发送方私钥\"></textarea>\r\n        <img src=\"@/assets/images/transform.png\" class=\"swap-transform pointer\"/>\r\n        <textarea class=\"imputation-textarea\" v-model=\"getAddress\" placeholder=\"请输入接收方地址\" v-if=\"!toOne\"></textarea>\r\n        <input type=\"text\" placeholder=\"请输入接收方钱包地址\" v-model=\"getAddressOne\" v-else class=\"imputation-input\">\r\n        <el-button class=\"swap-btn MT-10\" :disabled=\"!sendAddress || (!getAddress && !getAddressOne)\" :loading=\"imputationLoading\" @click=\"imputationHandler\">查询</el-button>\r\n        </div>\r\n\r\n        <div class=\"flex-1 wrapper-box__back flex-column-start\" v-if=\"isBack\">\r\n          <div class=\"flex-h__1\">\r\n            <table class=\"imputation-table\"> \r\n                <thead>\r\n                <tr>\r\n                    <th>发送地址</th>\r\n                    <th>接收地址</th>\r\n                    <th>{{item1.symbol}}余额</th>\r\n                    <th>执行结果</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"(item, index) in tableList\" :key=\"index\">\r\n                    <td>{{item.provider ? showAddress(item.provider.address) : '--'}}</td>\r\n                    <td>{{item.getAddress ? showAddress(item.getAddress) : '--'}}</td>\r\n                    <td>{{ item.balance || '--' }}</td>\r\n                    <td>\r\n                    <el-icon class=\"is-loading\" v-if=\"item.loading\">\r\n                        <Loading />\r\n                    </el-icon>\r\n                    <template v-else>\r\n                        {{ item.message }}\r\n                    </template>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"flex-row-start align-center MB-20 MT-20\">\r\n              <div class=\"text-16 MR-30\">发送数量</div>\r\n              <div class=\"swap-item__input flex-1 flex-row-start align-center\">\r\n              <input class=\"text-right flex-1\" v-model=\"price\" placeholder=\"0.00\">\r\n              </div>\r\n          </div>\r\n          <div class=\"swap-slippage MT-10 MB-20\">\r\n              <div class=\"swap-slippage__select flex-row-between pointer\">\r\n              <div class=\"text-16\">GWEI</div>\r\n              <div class=\"flex-row-end\">\r\n                  <el-tag \r\n                  class=\"swap-slippage__select-tag\" \r\n                  type=\"warning\" \r\n                  :effect=\"gWei == item ? 'dark' : 'light'\" \r\n                  @click=\"toggleGwei(item)\"\r\n                  v-for=\"item in gWeiList\"\r\n                  :key=\"item\">\r\n                  {{ item }}\r\n                  </el-tag>\r\n                  <input type=\"number\" class=\"swap-slippage__select-input\" placeholder=\"5\" v-model.number=\"gWei\">\r\n              </div>\r\n              </div>\r\n          </div>\r\n          <div class=\"flex-row-start align-center\">\r\n            <el-icon :size=\"40\" class=\"pointer\" @click=\"isBack = false\"><Back /></el-icon>\r\n            <el-button class=\"flex-1 swap-btn ML-20\" :loading=\"loading\" :disabled=\"!price\" @click=\"imputationConfitm\">确认</el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <Tokens ref=\"tokens\" @change=\"tokenChange\" @update=\"tokenUpdate\"/>\r\n</template>\r\n\r\n<script>\r\n    import Tokens from '../../swap/modal/tokens.vue'\r\n    import copy from 'copy-text-to-clipboard'\r\n    import BLKTokenABI from '@/api/abis/IERC20.json'\r\n    import { ElNotification } from 'element-plus'\r\n    import { utils } from 'ethers'\r\n    import { getBit, getLogo } from '../../../libs/utils'\r\n    import { mapGetters, mapActions } from 'vuex'\r\n    import i18n from '@/locals/index.js'\r\n    import { toRaw } from 'vue'\r\n    const { t } = i18n.global\r\n    export default {\r\n      data() {\r\n        return {\r\n          t,\r\n          utils,\r\n          getLogo,\r\n          getBit,\r\n          toOne: true,\r\n          isBack: false,\r\n          price: '',\r\n          activeName: 'imputation',\r\n          progress: 10,\r\n          loading: false,\r\n          imputationLoading: false,\r\n          gWei: 5,\r\n          gWeiList: [5, 7, 10, 15, 20],\r\n          type: '',\r\n          // 发送方地址\r\n          sendAddress: '',\r\n          getAddressOne: '',\r\n          // 接收方地址\r\n          getAddress: '',\r\n          tableList: [],\r\n          // 第一个币种信息\r\n          item1: {\r\n            name: \"BNB\",\r\n            symbol: \"BNB\",\r\n            address: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\r\n            balance: '',\r\n            price: '',\r\n            loading: false\r\n          },\r\n        }\r\n      },\r\n      components: {\r\n        Tokens,\r\n      },\r\n      watch: {\r\n        'currentNetwork.ChainID': {\r\n          immediate: true,\r\n          handler() {\r\n            const { Token } = this.currentNetwork\r\n            const item1 = Token[0]\r\n            const item2 = Token[1] || Token[0]\r\n            this.item1 = {...this.item1, ...item1}\r\n            this.item2 = {...this.item2, ...item2}\r\n            this.gWei = 5 * this.currentNetwork.GWEI\r\n            this.gWeiList = [\r\n              5 * this.currentNetwork.GWEI, \r\n              7 * this.currentNetwork.GWEI, \r\n              10 * this.currentNetwork.GWEI, \r\n              15 * this.currentNetwork.GWEI, \r\n              20 * this.currentNetwork.GWEI\r\n            ]\r\n          }\r\n        },\r\n      },\r\n      directives: {\r\n        bit: {\r\n          updated(el) {\r\n            el.value = el.value ? getBit(el.value, 5) : ''\r\n          }\r\n        }\r\n      },\r\n      computed: {\r\n        ...mapGetters(['currentNetwork', 'networkList', 'currentDex']),\r\n      },\r\n      methods: {\r\n        ...mapActions(['setCurrentDex', 'setConnectDialog']),\r\n        showAddress(address) {\r\n          return '0x...' + address.slice(-4)\r\n        },\r\n        async imputationHandler() {\r\n          this.imputationLoading = true\r\n          const sendList = this.sendAddress.split('\\n')\r\n          let getList = this.getAddress.split('\\n')\r\n          let decimals\r\n          let checkStatus = true\r\n          if (this.toOne) {\r\n            if (this.getAddressOne.length != 42) {\r\n              ElNotification({\r\n                type: 'error',\r\n                title: '温馨提醒',\r\n                message: `接收方账号错误，请检查`\r\n              })\r\n              checkStatus = false\r\n            }\r\n          } else {\r\n            for (let i = 0; i < getList.length; i++) {\r\n              const item = getList[i];\r\n              if (item.length != 42) {\r\n                ElNotification({\r\n                  type: 'error',\r\n                  title: '温馨提醒',\r\n                  message: `第${i}行账号错误，请检查`\r\n                })\r\n                checkStatus = false\r\n                break\r\n              }\r\n            }\r\n          }\r\n          if (!checkStatus) {\r\n            return\r\n          }\r\n          const list = []\r\n          const promises = []\r\n          for (let i = 0; i < sendList.length; i++) {\r\n            const item = sendList[i];\r\n            let provider\r\n            let status\r\n            let message\r\n            let contract\r\n            try {\r\n              provider = window.wallet.getPrivateKeyProvider(item)\r\n              contract = window.wallet.initContract(this.item1.address, BLKTokenABI, provider)\r\n              if (!decimals) {\r\n                decimals = await contract.decimals()\r\n              }\r\n              if (this.item1.address == this.currentNetwork.MainCoin.address) {\r\n                promises.push(provider.getBalance())\r\n              } else {\r\n                promises.push(contract.balanceOf(provider.address))\r\n              }\r\n            } catch (error) {\r\n              console.log(error)\r\n              status = -1\r\n              message = error.data ? error.data.message || error.message : error.reason || error.message\r\n            }\r\n            list.push({\r\n              provider,\r\n              getAddress: this.toOne ? this.getAddressOne : getList[i],\r\n              balance: 0,\r\n              status,\r\n              message,\r\n              contract,\r\n              decimals,\r\n              loading: false\r\n            })\r\n          }\r\n\r\n          const data = await Promise.allSettled(promises)\r\n          data.forEach((item, index) => {\r\n            if (item.status === \"fulfilled\") {\r\n              list[index].balance = getBit(utils.formatUnits(item.value.toString(), decimals), 6),\r\n              list[index].status = 0\r\n            } else {\r\n              list[index].balance = ''\r\n              list[index].status = -1\r\n              list[index].message = '余额查询失败'\r\n            }\r\n          })\r\n\r\n          this.tableList = list\r\n          this.imputationLoading = false\r\n          this.isBack = true\r\n        },\r\n        async imputationConfitm() {\r\n          this.tableList.forEach(async (item, index) => {\r\n            item = toRaw(item)\r\n            if (item.status == 0) {\r\n              this.tableList[index].loading = true\r\n              let promise\r\n              if (this.item1.address == this.currentNetwork.MainCoin.address) {\r\n                promise = item.provider.sendTransaction({\r\n                  from: item.provider.address, \r\n                  to: item.getAddress, \r\n                  value: utils.parseUnits(this.price.toString(), 18)\r\n                });\r\n              } else {\r\n                promise = item.contract.transfer(\r\n                  item.getAddress, \r\n                  utils.parseUnits(this.price.toString(), item.decimals),\r\n                  {\r\n                    gasPrice: utils.parseUnits(this.gWei.toString(), 9),\r\n                    gasLimit: 200000\r\n                  }\r\n                )\r\n              }\r\n              \r\n              promise.then(tx => {\r\n                tx.wait().then(() => {\r\n                  this.tableList[index].status = 1\r\n                  this.tableList[index].message = '发送成功'\r\n                  this.tableList[index].loading = false\r\n                }).catch(err => {\r\n                  console.log(index, err)  \r\n                  this.tableList[index].status = 0\r\n                  this.tableList[index].message = '发送失败'\r\n                  this.tableList[index].loading = false\r\n                })\r\n              }).catch(err => {\r\n                console.log(index, err)\r\n                this.tableList[index].status = 0\r\n                this.tableList[index].message = '发送失败'\r\n                this.tableList[index].loading = false\r\n              })\r\n            }\r\n          })        \r\n        },\r\n        // 更新币种信息\r\n        tokenUpdate({name, symbol}) {\r\n          this.item1.name = name\r\n          this.item1.symbol = symbol\r\n        },\r\n        // 修改需要转换的币\r\n        async tokenChange(data) {\r\n          this.item1 = data\r\n        },\r\n        copyHandler(text) {\r\n          copy(text)\r\n          ElNotification({\r\n            type: t('swap.success'),\r\n            title: t('swap.success'),\r\n            message: t('swap.copySuccess')\r\n          })\r\n        },\r\n        toggleGwei(data) {\r\n          this.gWei = data\r\n        },\r\n        openTokensDialog(type) {\r\n          this.type = type\r\n          this.$refs.tokens.open()\r\n        },\r\n        // 连接钱包\r\n        loginFn() {\r\n          this.setConnectDialog(true)\r\n        }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .flex-h__1{\r\n    overflow: auto;\r\n  }\r\n  .wrapper{\r\n    .wrapper-box{\r\n      position: relative;\r\n      \r\n      .wrapper-box__back{\r\n        position: absolute;\r\n        z-index: 20;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: #181818;\r\n        border: 1px solid #2A2A2A;\r\n        border-radius: 18px;\r\n        padding: 10px 20px;\r\n      }\r\n    }\r\n  }\r\n    .imputation-table{\r\n      width: 100%;\r\n      border: 1px solid #2A2A2A;\r\n      border-radius: 18px;\r\n      border-spacing: 0;\r\n      th{\r\n        padding: 10px 0;\r\n        border-right: 1px solid #2A2A2A;\r\n        &:last-child{\r\n          border-right: none;\r\n        }\r\n      }\r\n      td {\r\n        text-align: center;\r\n        border-top: 1px solid #2A2A2A;\r\n        border-right: 1px solid #2A2A2A;\r\n        word-break: break-all;\r\n        width: 25%;\r\n        padding: 10px;\r\n        &:last-child{\r\n          border-right: none;\r\n        }\r\n      } \r\n    }\r\n  .imputation-textarea{\r\n    margin: 10px 30px;\r\n    background: none;\r\n    border: 1px solid #898989;\r\n    border-radius: 8px;\r\n    width: calc(100% - 60px);\r\n    height: 150px;\r\n    resize: none;\r\n    color: #fff;\r\n    padding: 10px;\r\n  }\r\n  .imputation-input{\r\n    margin: 10px 30px;\r\n    background: none;\r\n    border: 1px solid #898989;\r\n    border-radius: 8px;\r\n    width: calc(100% - 60px);\r\n    height: 40px;\r\n    color: #fff;\r\n    padding: 10px;\r\n  }\r\n  .swap-item__input{\r\n    width: 100%;\r\n    height: 40px;\r\n    border: 1px solid #2A2A2A;\r\n    border-radius: 8px;\r\n    background: none;\r\n    font-size: 14px;\r\n    padding: 0 20px;\r\n    color: #fff;\r\n    position: relative;\r\n    >input{\r\n      width: 100%;\r\n      height: 100%;\r\n      background: none;\r\n      color: #fff;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  .swap-btn{\r\n    margin: 0 auto;\r\n    width: calc(100% - 60px);\r\n    height: 60px;\r\n    background: #FCBE2F;\r\n    border: 1px solid #2A2A2A;\r\n    border-radius: 18px;\r\n    color: #fff;\r\n    display: block;\r\n    &.is-disabled{\r\n      background: #e4e7ed !important;\r\n    }\r\n    &:hover, &:focus, &:active{\r\n      background: #FCBE2F;\r\n      color: #fff;\r\n      border: none;\r\n    }\r\n  }\r\n  </style>","import { render } from \"./Imputation.vue?vue&type=template&id=7924701a&scoped=true\"\nimport script from \"./Imputation.vue?vue&type=script&lang=js\"\nexport * from \"./Imputation.vue?vue&type=script&lang=js\"\n\nimport \"./Imputation.vue?vue&type=style&index=0&id=7924701a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7924701a\"\n\nexport default script","<template>\r\n    <div class=\"flex-row-center flex-1 flex-start wrapper\">\r\n      <div class=\"wrapper-box\" :class=\"{'back': isBack}\">\r\n        <div class=\"swap-info PB-20 imputation\">\r\n        <div class=\"swap-item\">\r\n            <div class=\"swap-item__top flex-row-between\">\r\n                <div class=\"flex-row-start align-center pointer\">\r\n                    <div class=\"flex-row-start align-center\" @click=\"openTokensDialog('item1')\">\r\n                    <img v-lazy=\"getLogo(item1.address)\" class=\"swap-item__top-icon MR-10\"/>\r\n                    <div class=\"swap-item__top-name text-overflow__1\">{{item1.symbol}}</div>\r\n                    <el-icon class=\"ML-5\">\r\n                        <ArrowDown />\r\n                    </el-icon>\r\n                    </div>\r\n                    <el-icon class=\"ML-5\" @click=\"copyHandler(item1.address)\"><CopyDocument /></el-icon>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <img src=\"@/assets/images/transform.png\" class=\"swap-transform pointer\" @click=\"transformHandler\"/>\r\n        <div class=\"swap-item\">\r\n            <div class=\"swap-item__top flex-row-between\">\r\n                <div class=\"flex-row-start align-center pointer\">\r\n                    <div class=\"flex-row-start align-center\" @click=\"openTokensDialog('item2')\">\r\n                    <img v-lazy=\"getLogo(item2.address)\" class=\"swap-item__top-icon MR-10\"/>\r\n                    <div class=\"swap-item__top-name text-overflow__1\">{{item2.symbol}}</div>\r\n                    <el-icon class=\"ML-5\">\r\n                        <ArrowDown />\r\n                    </el-icon>\r\n                    </div>\r\n                    <el-icon class=\"ML-5\" @click=\"copyHandler(item2.address)\"><CopyDocument /></el-icon>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <textarea class=\"imputation-textarea\" v-model=\"sendAddress\" placeholder=\"请输入需要交换的私钥，一行一个\"></textarea>\r\n        <el-button class=\"swap-btn MT-10\" :disabled=\"!sendAddress\" :loading=\"searchLoading\" @click=\"searchHandler\">查询</el-button>\r\n        </div>\r\n        <div class=\"flex-1 wrapper-box__back flex-column-start\" v-if=\"isBack\">\r\n          <div class=\"flex-h__1\">\r\n          <table class=\"imputation-table\"> \r\n              <thead>\r\n              <tr>\r\n                  <th>转换币</th>\r\n                  <th>被转换币</th>\r\n                  <th>转换账号</th>\r\n                  <th>{{item1.symbol}}余额</th>\r\n                  <th>执行结果</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(item, index) in tableList\" :key=\"index\">\r\n                  <td>{{ item1.symbol }}</td>\r\n                  <td>{{ item2.symbol }}</td>\r\n                  <td>{{item.provider ? showAddress(item.provider.address) : '--'}}</td>\r\n                  <td>{{ item.balance || '--' }}</td>\r\n                  <td>\r\n                      \r\n                    <el-icon class=\"is-loading\" v-if=\"item.loading\">\r\n                        <Loading />\r\n                    </el-icon>\r\n                    <template v-else>\r\n                        {{ item.message }}\r\n                    </template>\r\n                  </td>\r\n              </tr>\r\n              </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"swap-slippage MT-20\">\r\n            <div class=\"swap-slippage__select flex-row-between pointer\">\r\n              <div class=\"text-18\">貔貅检测</div>\r\n              <div class=\"flex-row-end\">\r\n                <el-switch\r\n                  v-model=\"braveTroopsTest\"\r\n                  size=\"large\"\r\n                  class=\"swap-switch\"\r\n                />\r\n              </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"swap-slippage MT-20\">\r\n            <div class=\"swap-slippage__select flex-row-between pointer\">\r\n              <div class=\"text-18\">转换模式</div>\r\n              <div class=\"flex-row-end\">\r\n                <el-switch\r\n                  v-model=\"transformMode\"\r\n                  size=\"large\"\r\n                  class=\"swap-switch\"\r\n                  active-text=\"数量模式\"\r\n                  inactive-text=\"比例模式\"\r\n                />\r\n              </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"swap-slippage MT-20 MB-20\">\r\n            <div class=\"swap-slippage__select flex-row-between pointer\">\r\n            <div class=\"text-18\">GWEI</div>\r\n            <div class=\"flex-row-end\">\r\n                <el-tag \r\n                class=\"swap-slippage__select-tag\" \r\n                type=\"warning\" \r\n                :effect=\"gWei == item ? 'dark' : 'light'\" \r\n                @click=\"toggleGwei(item)\"\r\n                v-for=\"item in gWeiList\"\r\n                :key=\"item\">\r\n                {{ item }}\r\n                </el-tag>\r\n                <input type=\"number\" class=\"swap-slippage__select-input\" placeholder=\"5\" v-model.number=\"gWei\">\r\n            </div>\r\n            </div>\r\n        </div>\r\n        <div>\r\n          <div class=\"flex-row-between\">\r\n            <div>{{ t('swap.tolerance') }}</div>\r\n            <div class=\"text-blue\">{{progress}}%</div>\r\n          </div>\r\n          <div>\r\n            <el-slider v-model=\"progress\" :min=\"1\" :max=\"99\" @input=\"progressChange\"/>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"!transformMode\" class=\"MT-10\">\r\n          <div class=\"flex-row-between\">\r\n            <div>转换比例</div>\r\n            <div class=\"text-blue\">{{transformRate}}%</div>\r\n          </div>\r\n          <div>\r\n            <el-slider v-model=\"transformRate\" :min=\"1\" :max=\"99\" @input=\"progressChange\"/>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex-row-start align-center MB-10 MT-10\" v-else>\r\n            <div class=\"text-18 MR-30\">转换数量</div>\r\n            <div class=\"swap-item__input flex-1 flex-row-start align-center\">\r\n            <input class=\"text-right flex-1\" v-model=\"price\" placeholder=\"0.00\">\r\n            </div>\r\n        </div>\r\n        <div class=\"flex-row-start align-center\">\r\n          <el-icon :size=\"40\" class=\"pointer\" v-if=\"!hasLoading\" @click=\"isBack = false\"><Back /></el-icon>\r\n          <el-button class=\"swap-btn MT-10\" :loading=\"hasLoading\" :disabled=\"transformMode && !price\" @click=\"swapHandler\">交换</el-button>\r\n        </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <Tokens ref=\"tokens\" @change=\"tokenChange\" @update=\"tokenUpdate\"/>\r\n</template>\r\n\r\n<script>\r\nimport Tokens from '../../swap/modal/tokens.vue'\r\nimport copy from 'copy-text-to-clipboard'\r\nimport { ElNotification } from 'element-plus'\r\nimport BLKTokenABI from '@/api/abis/IERC20.json'\r\nimport { utils } from 'ethers'\r\nimport { getBit, getLogo, Tips } from '../../../libs/utils'\r\nimport ABI from '@/api/abis/SwapHelper.json'\r\nimport { product } from '@/plugins/wallet/config.json'\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport i18n from '@/locals/index.js'\r\nimport { toRaw } from 'vue'\r\nconst { t } = i18n.global\r\nexport default {\r\n  data() {\r\n    return {\r\n      t,\r\n      utils,\r\n      getLogo,\r\n      getBit,\r\n      // 滑点\r\n      progress: 10,\r\n      loading: false,\r\n      // 搜索loading\r\n      searchLoading: false,\r\n      // 转换模式\r\n      transformMode: false,\r\n      // 貔貅检测\r\n      braveTroopsTest: false,\r\n      // 转换比例\r\n      transformRate: 10,\r\n      isBack: false,\r\n      gWei: 5,\r\n      gWeiList: [5, 7, 10, 15, 20],\r\n      type: '',\r\n      price: '',\r\n      fee: '',\r\n      txPrice: '',\r\n      // 发送方地址\r\n      sendAddress: '',\r\n      tableList: [],\r\n      // 第一个币种信息\r\n      item1: {\r\n        name: \"BNB\",\r\n        symbol: \"BNB\",\r\n        address: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\r\n        balance: '',\r\n        price: '',\r\n        loading: false\r\n      },\r\n      // 第二个币种信息\r\n      item2: {\r\n          name: \"BUSD\",\r\n          symbol: \"BUSD\",\r\n          address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\r\n          balance: '',\r\n          price: '',\r\n          loading: false\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    Tokens,\r\n  },\r\n  watch: {\r\n    'currentNetwork.ChainID': {\r\n      immediate: true,\r\n      handler() {\r\n        const { Token } = this.currentNetwork\r\n        const item1 = Token[0]\r\n        const item2 = Token[1] || Token[0]\r\n        this.item1 = {...this.item1, ...item1}\r\n        this.item2 = {...this.item2, ...item2}\r\n        this.gWei = 5 * this.currentNetwork.GWEI\r\n        this.gWeiList = [\r\n          5 * this.currentNetwork.GWEI, \r\n          7 * this.currentNetwork.GWEI, \r\n          10 * this.currentNetwork.GWEI, \r\n          15 * this.currentNetwork.GWEI, \r\n          20 * this.currentNetwork.GWEI\r\n        ]\r\n      }\r\n    },\r\n  },\r\n  directives: {\r\n    bit: {\r\n      updated(el) {\r\n        el.value = el.value ? getBit(el.value, 5) : ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentNetwork', 'networkList', 'currentDex']),\r\n    hasLoading() {\r\n      const item = this.tableList.find(item => {\r\n        return item.loading\r\n      })\r\n      return !!item\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setCurrentDex', 'setConnectDialog']),\r\n    // 搜索\r\n    async searchHandler() {\r\n      this.searchLoading = true\r\n      const sendList = this.sendAddress.split('\\n')\r\n      let decimals\r\n      const list = []\r\n      const promises = []\r\n      for (let i = 0; i < sendList.length; i++) {\r\n        const item = sendList[i];\r\n        let provider\r\n        let status\r\n        let message\r\n        let contract\r\n        try {\r\n          provider = window.wallet.getPrivateKeyProvider(item)\r\n          contract = window.wallet.initContract(this.item1.address, BLKTokenABI, provider)\r\n          if (!decimals) {\r\n            decimals = await contract.decimals()\r\n          }\r\n          if (this.item1.address == this.currentNetwork.MainCoin.address) {\r\n            promises.push(provider.getBalance())\r\n          } else {\r\n            promises.push(contract.balanceOf(provider.address))\r\n          }\r\n        } catch (error) {\r\n          status = -1\r\n          message = error.data ? error.data.message || error.message : error.reason || error.message\r\n        }\r\n        list.push({\r\n          provider,\r\n          balance: 0,\r\n          status,\r\n          message,\r\n          contract,\r\n          decimals,\r\n          loading: false\r\n        })\r\n      }\r\n      const data = await Promise.allSettled(promises)\r\n      data.forEach((item, index) => {\r\n        if (item.status === \"fulfilled\") {\r\n          list[index].balance = getBit(utils.formatUnits(item.value.toString(), decimals), 6),\r\n          list[index].status = 0\r\n        } else {\r\n          list[index].balance = ''\r\n          list[index].status = -1\r\n          list[index].message = '余额查询失败'\r\n        }\r\n      })\r\n      this.tableList = list\r\n      this.searchLoading = false\r\n      this.isBack = true\r\n    },\r\n    // 获取最优路径\r\n    async getPath(decimals) {\r\n      const bool = this.currentNetwork.TransferTokens.find(item => {\r\n        return item.address.toLocaleLowerCase() === this.item2.address.toLocaleLowerCase()\r\n      })\r\n      let promises = []\r\n      promises = [window.wallet.ContractWETH.getAmountsOut(utils.parseUnits('1', decimals), [\r\n          this.item1.address,\r\n          this.item2.address\r\n      ])]\r\n      let addressPath = [[this.item1.address, this.item2.address]]\r\n      // 智能检测\r\n      if (this.intellectTest) {\r\n          this.currentNetwork.TransferTokens.forEach(item => {\r\n              if (item.address != this.item1.address && item.address != this.item2.address) {\r\n                  addressPath.push([this.item1.address,item.address,this.item2.address])\r\n                  promises.push(window.wallet.ContractWETH.getAmountsOut(utils.parseUnits('1', decimals), [\r\n                      this.item1.address,\r\n                      item.address,\r\n                      this.item2.address\r\n                  ]))\r\n                  // 如果当前需要转换的币不是用来中转的币，则需要再查一遍\r\n                  if (!bool) {\r\n                      this.currentNetwork.TransferTokens.forEach(sub => {\r\n                          if (item.address != sub.address) {\r\n                              addressPath.push([this.item1.address,item.address, sub.address, this.item2.address])\r\n                              promises.push(window.wallet.ContractWETH.getAmountsOut(utils.parseUnits('1', decimals), [\r\n                              this.item1.address,\r\n                                  item.address,\r\n                                  sub.address,\r\n                                  this.item2.address\r\n                              ]))\r\n                          }\r\n                      })\r\n                  }\r\n              }\r\n          })\r\n      }\r\n      const data = await Promise.allSettled(promises)\r\n      let result = '';\r\n      let lastIndex;\r\n      data.forEach((item, index) => {\r\n          const {status, value} = item\r\n          if (status == \"fulfilled\") {\r\n          const last = value[value.length - 1]\r\n          if (!result) {\r\n              result = last\r\n              lastIndex = index\r\n          } else if (last.gt(result)) {\r\n              result = last\r\n              lastIndex = index\r\n          }\r\n          }\r\n      })\r\n      const path = addressPath[lastIndex]\r\n      return path\r\n    },\r\n    // 获取交换数量\r\n    getPrice(decimals, balance) {\r\n      if (this.transformMode) {\r\n        return utils.parseUnits(this.price.toString(), decimals)\r\n      } else {\r\n        const res = balance * this.transformRate / 100\r\n        return utils.parseUnits(res.toString(), decimals)\r\n      }\r\n    },\r\n    // 交换\r\n    async swapHandler () {\r\n      let path\r\n      let fee;\r\n      let txPrice;\r\n      for (let i = 0; i < this.tableList.length; i++) {\r\n        this.tableList[i].loading = true\r\n        const item = toRaw(this.tableList[i]);\r\n        const contract = window.wallet.initContract(product.SWAP_HELPER, ABI, item.provider)\r\n        // 由于费率是固定的，只需要获取一次\r\n        if (!fee) {\r\n          const [one, two] = await Promise.all([contract.callFee(), contract.checkTxPrice()])\r\n          fee = one\r\n          txPrice = two\r\n        }\r\n        // 路径只用获取一次\r\n        if (!path) {\r\n          path = await this.getPath(item.decimals)\r\n        }\r\n        const price = this.getPrice(item.decimals, item.balance)\r\n        let valueBigNumber = utils.parseUnits('0', 18)\r\n        valueBigNumber = valueBigNumber.add(fee)\r\n        // 貔貅检测费用\r\n        if (this.braveTroopsTest) {\r\n            valueBigNumber = valueBigNumber.add(txPrice)\r\n        }\r\n        // 主网币要按value算\r\n        if (this.item1.address === this.currentNetwork.MainCoin.address) {\r\n            valueBigNumber = valueBigNumber.add(price)\r\n        }\r\n        try {\r\n            contract.estimateGas.manyTokensBuy(\r\n              price, \r\n              1, \r\n              this.progress, \r\n              this.braveTroopsTest, \r\n              [item.provider.address], \r\n              path, \r\n              {\r\n                  value: valueBigNumber,\r\n                  gasPrice: utils.parseUnits(this.gWei.toString(), 9),\r\n              }\r\n            ).then( gasLimit => {\r\n              contract.manyTokensBuy(\r\n                  price, \r\n                  1, \r\n                  this.progress, \r\n                  this.braveTroopsTest, \r\n                  [item.provider.address], \r\n                  path, \r\n                  {\r\n                      value: valueBigNumber,\r\n                      gasPrice: utils.parseUnits(this.gWei.toString(), 9),\r\n                      gasLimit: gasLimit.mul(135).div(100)\r\n                  }\r\n              ).then(tx => {\r\n                tx.wait().then(() => {\r\n                  this.tableList[i].status = 1\r\n                  this.tableList[i].loading = false\r\n                  this.tableList[i].message = '转换成功'\r\n                }).catch(error => {\r\n                  console.log(error)\r\n                  this.tableList[i].status = -1\r\n                  this.tableList[i].loading = false\r\n                  this.tableList[i].message = error.data ? error.data.message || error.message : error.reason || error.message\r\n                })\r\n              }).catch(error => {\r\n                console.log(error)\r\n                this.tableList[i].status = -1\r\n                this.tableList[i].loading = false\r\n                this.tableList[i].message = error.data ? error.data.message || error.message : error.reason || error.message\r\n              })\r\n            }).catch(error => {\r\n              console.log(error)\r\n              this.tableList[i].status = -1\r\n              this.tableList[i].loading = false\r\n              this.tableList[i].message = error.data ? error.data.message || error.message : error.reason || error.message\r\n            })\r\n        } catch (error) {\r\n          console.log(error)\r\n          this.tableList[i].status = -1\r\n          this.tableList[i].loading = false\r\n          this.tableList[i].message = error.data ? error.data.message || error.message : error.reason || error.message\r\n        }\r\n      }\r\n    },\r\n    showAddress(address) {\r\n      return '0x...' + address.slice(-4)\r\n    },\r\n    // 更新币种信息\r\n    tokenUpdate({name, symbol}) {\r\n      this.item1.name = name\r\n      this.item1.symbol = symbol\r\n    },\r\n    // 修改需要转换的币\r\n    async tokenChange(data) {\r\n      this.item1 = data\r\n    },\r\n    copyHandler(text) {\r\n      copy(text)\r\n      ElNotification({\r\n        type: t('swap.success'),\r\n        title: t('swap.success'),\r\n        message: t('swap.copySuccess')\r\n      })\r\n    },\r\n    toggleGwei(data) {\r\n      this.gWei = data\r\n    },\r\n    openTokensDialog(type) {\r\n      this.type = type\r\n      this.$refs.tokens.open()\r\n    },\r\n    // 切换上下币种\r\n    transformHandler(){\r\n      const res = toRaw(this.item1)\r\n      this.item1 = toRaw(this.item2)\r\n      this.item2 = res\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.swap-switch{\r\n  .el-switch__label.el-switch__label--left, .el-switch__label.el-switch__label--right{\r\n    color: #fff;\r\n    &.is-active{\r\n      color: #E8BE1B;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .flex-h__1{\r\n    overflow: auto;\r\n  }\r\n  .wrapper{\r\n    .wrapper-box{\r\n      position: relative;\r\n      \r\n      .wrapper-box__back{\r\n        position: absolute;\r\n        z-index: 20;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: #181818;\r\n        border: 1px solid #2A2A2A;\r\n        border-radius: 18px;\r\n        padding: 20px;\r\n      }\r\n    }\r\n  }\r\n  .text-blue{\r\n    font-size: 16px;\r\n    color: #1fc7d5;\r\n  }\r\n    .imputation-table{\r\n      width: 100%;\r\n      border: 1px solid #2A2A2A;\r\n      border-radius: 18px;\r\n      border-spacing: 0;\r\n      th{\r\n        padding: 10px 0;\r\n        border-right: 1px solid #2A2A2A;\r\n        &:last-child{\r\n          border-right: none;\r\n        }\r\n      }\r\n      td {\r\n        text-align: center;\r\n        border-top: 1px solid #2A2A2A;\r\n        border-right: 1px solid #2A2A2A;\r\n        word-break: break-all;\r\n        width: 20%;\r\n        padding: 10px;\r\n        &:last-child{\r\n          border-right: none;\r\n        }\r\n      } \r\n    }\r\n  .imputation-textarea{\r\n    margin: 10px 30px;\r\n    background: none;\r\n    border: 1px solid #898989;\r\n    border-radius: 8px;\r\n    width: calc(100% - 60px);\r\n    height: 350px;\r\n    resize: none;\r\n    color: #fff;\r\n    padding: 10px;\r\n  }\r\n  .imputation-input{\r\n    margin: 10px 30px;\r\n    background: none;\r\n    border: 1px solid #898989;\r\n    border-radius: 8px;\r\n    width: calc(100% - 60px);\r\n    height: 40px;\r\n    color: #fff;\r\n    padding: 10px;\r\n  }\r\n  .swap-item__input{\r\n    width: 100%;\r\n    height: 40px;\r\n    border: 1px solid #2A2A2A;\r\n    border-radius: 8px;\r\n    background: none;\r\n    font-size: 14px;\r\n    padding: 0 20px;\r\n    color: #fff;\r\n    position: relative;\r\n    >input{\r\n      width: 100%;\r\n      height: 100%;\r\n      background: none;\r\n      color: #fff;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  .swap-btn{\r\n    margin: 0 auto;\r\n    width: calc(100% - 60px);\r\n    height: 60px;\r\n    background: #FCBE2F;\r\n    border: 1px solid #2A2A2A;\r\n    border-radius: 18px;\r\n    color: #fff;\r\n    display: block;\r\n    &.is-disabled{\r\n      background: #e4e7ed !important;\r\n    }\r\n    &:hover, &:focus, &:active{\r\n      background: #FCBE2F;\r\n      color: #fff;\r\n      border: none;\r\n    }\r\n  }\r\n  </style>","import { render } from \"./Swap.vue?vue&type=template&id=664aac78&scoped=true\"\nimport script from \"./Swap.vue?vue&type=script&lang=js\"\nexport * from \"./Swap.vue?vue&type=script&lang=js\"\n\nimport \"./Swap.vue?vue&type=style&index=0&lang=scss\"\nimport \"./Swap.vue?vue&type=style&index=1&id=664aac78&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-664aac78\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=03795648\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Swap.vue?vue&type=style&index=1&id=664aac78&lang=scss&scoped=true\"; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Swap.vue?vue&type=style&index=1&id=664aac78&lang=scss&scoped=true\"","module.exports = \"./images/transform5dc41586b2a3ba671b8cb88580863420.png\";","export { default } from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Swap.vue?vue&type=style&index=0&lang=scss\"; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Swap.vue?vue&type=style&index=0&lang=scss\"","export { default } from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Imputation.vue?vue&type=style&index=0&id=7924701a&lang=scss&scoped=true\"; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./Imputation.vue?vue&type=style&index=0&id=7924701a&lang=scss&scoped=true\"","export { default } from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./tokens.vue?vue&type=style&index=0&lang=scss\"; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./tokens.vue?vue&type=style&index=0&lang=scss\"","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    :title=\"$t('swap.selectToken')\"\r\n    width=\"420px\"\r\n    custom-class=\"tokens\"\r\n  >\r\n    <div class=\"flex-column-start tokens-content\">\r\n        <div class=\"flex-row-start align-center\">\r\n            <input type=\"text\" class=\"tokens-input flex-1\" v-model.trim=\"searchTxt\" placeholder=\"Search name or paste address\" />\r\n            <el-button class=\"MR-20\" @click=\"fastImport()\" :disabled=\"!searchTxt || searchTxt.length != 42 && !importTokens.name\">{{ t('swap.fastImport') }}</el-button>\r\n        </div>\r\n        \r\n        <div class=\"flex-h__1 tokens-list\">\r\n            <div class=\"tokens-list__import flex-row-start align-center PL-30 PR-30 PB-30 PT-30\" v-if=\"importTokens.name\">\r\n                <div class=\"flex-row-start flex-1 align-center\">\r\n                    <img v-lazy=\"getLogo(importTokens.address)\" class=\"tokens-list__item-icon MR-10\"/>\r\n                    <div class=\"tokens-list__import-name MR-10\">{{importTokens.name}}</div>\r\n                    <div class=\"tokens-list__import-desc\">{{importTokens.symbol}}</div>\r\n                </div>\r\n                <el-button class=\"tokens-list__import-btn\" @click=\"importHandler\">{{ t('swap.import') }}</el-button>\r\n            </div>\r\n            <template v-else>\r\n                <div \r\n                    class=\"tokens-list__item pointer flex-row-start align-center pointer\"\r\n                    v-for=\"(item, index) in getTokens\"\r\n                    :key=\"item.address\"\r\n                    @click=\"selectHandler(item)\"\r\n                >\r\n                    <img v-lazy=\"getLogo(item.address)\" class=\"tokens-list__item-icon MR-10\"/>\r\n                    <div class=\"flex-1\">\r\n                        <div class=\"token-list__item-title\">{{item.name}}</div>\r\n                        <div class=\"token-list__item-desc\">{{item.symbol}}</div>\r\n                    </div>\r\n                    <div class=\"token-list__item-price\">{{ item.balance ? getBit(utils.formatUnits(item.balance, item.decimals || 18), 5) : '' }}</div>\r\n                    <el-icon :size=\"30\" color=\"#fff\" class=\"ML-10\" @click.stop=\"removeTokens(index)\" v-if=\"item.isAdd\"><Close /></el-icon>\r\n                </div>\r\n            </template>\r\n            \r\n        </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { utils } from 'ethers'\r\nimport { getBit, Tips, getLogo } from '../../../libs/utils'\r\nimport { mapGetters } from 'vuex'\r\nimport { toRaw } from 'vue'\r\nexport default {\r\n    name: 'Tokens',\r\n    data() {\r\n        return {\r\n            utils,\r\n            getBit,\r\n            getLogo,\r\n            dialogVisible: false,\r\n            activeAddress: [],\r\n            searchTxt: '',\r\n            getTokens: [],\r\n            // 需要导入的token信息\r\n            importTokens: {},\r\n            tokens: [],\r\n            type: ''\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['currentNetwork']),\r\n    },\r\n    async mounted() {\r\n        const { outputCurrency, inputCurrency } = this.$route.query\r\n        if (outputCurrency && outputCurrency.length == 42) {\r\n            this.type = 'item2'\r\n            await this.getCurrencyInfo(outputCurrency)\r\n            this.importHandler()\r\n        }\r\n        if (inputCurrency && inputCurrency.length == 42) {\r\n            this.type = 'item1'\r\n            await this.getCurrencyInfo(inputCurrency)\r\n            this.importHandler()\r\n        }\r\n        this.type = ''\r\n    },\r\n    watch: {\r\n        'currentNetwork.ChainID': {\r\n            immediate: true,\r\n            handler() {\r\n                let tokens = localStorage.getItem(this.currentNetwork.ChainID+'tokens')\r\n                this.tokens = tokens ? JSON.parse(tokens) : this.currentNetwork.Token\r\n                this.getTokens = toRaw(this.tokens)\r\n                this.getBalance()\r\n            }\r\n        },\r\n        searchTxt(val) {\r\n            this.searchTxtChange(val)\r\n        }\r\n    },\r\n    methods: {\r\n        searchTxtChange(val) {\r\n            if (!val) {\r\n                this.getTokens = toRaw(this.tokens)\r\n            }\r\n            const list = this.tokens.filter(item => {\r\n                const { name, address } = item\r\n                if (name.toLocaleLowerCase().includes(val.toLocaleLowerCase()) || address.toLocaleLowerCase().includes(val.toLocaleLowerCase())) {\r\n                    return true\r\n                }\r\n                return false\r\n            })\r\n            this.importTokens = {}\r\n            this.getTokens = toRaw(list)\r\n            if (list.length <= 0 && val.length === 42) {\r\n                this.getCurrencyInfo(val)\r\n            }\r\n        },\r\n        /**\r\n         * 快捷导入\r\n         * @param { String } addr 需要导入的地址\r\n         * @param { Boolean } add 是否需要添加到代币列表\r\n         */\r\n        fastImport(addr, add = true) {\r\n            addr = addr || this.searchTxt\r\n            const item = this.tokens.find(item => {\r\n                return item.address === addr\r\n            })\r\n            if (item) {\r\n                this.selectHandler(item)\r\n            } else {\r\n                this.importTokens = {\r\n                    name: addr.slice(0, 6),\r\n                    symbol: addr.slice(0, 6),\r\n                    address: addr,\r\n                    isAdd: true\r\n                }\r\n                this.importHandler(add)\r\n                const contract = window.wallet.initContract(addr)\r\n                const promise = [contract.name(), contract.symbol()]\r\n                Promise.all(promise).then(([name, symbol]) => {\r\n                    this.updateTokenInfo(addr, name, symbol)\r\n                })\r\n            }\r\n        },\r\n        // 更新币种信息\r\n        updateTokenInfo(address, name, symbol) {\r\n            const tokensIndex = this.tokens.findIndex(item => {\r\n                return item.address === address\r\n            })\r\n            if (tokensIndex >= 0) {\r\n                this.tokens[tokensIndex].name = name\r\n                this.tokens[tokensIndex].symbol = symbol\r\n            }\r\n            const index = this.getTokens.findIndex(item => {\r\n                return item.address === address\r\n            })\r\n            if (index >= 0) {\r\n                this.getTokens[index].name = name\r\n                this.getTokens[index].symbol = symbol\r\n            }\r\n            this.$emit('update', {\r\n                address, \r\n                name, \r\n                symbol\r\n            })\r\n            localStorage.setItem(this.currentNetwork.ChainID+'tokens', JSON.stringify(this.tokens))\r\n        },\r\n        // 删除币种\r\n        removeTokens(index) {\r\n            const item = this.getTokens[index]\r\n            const tokenIndex = this.tokens.findIndex(child => {\r\n                return item.address == child.address\r\n            })\r\n            this.tokens.splice(tokenIndex, 1)\r\n            this.searchTxtChange(this.searchTxt)\r\n            localStorage.setItem(this.currentNetwork.ChainID+'tokens', JSON.stringify(this.tokens))\r\n        },\r\n        async getCurrencyInfo(val) {\r\n            const contract = window.wallet.initContract(val)\r\n            const promise = [contract.name(), contract.symbol(), contract.decimals()]\r\n            try {\r\n                await Promise.all(promise).then(([name, symbol, decimals]) => {\r\n                    this.importTokens = {\r\n                        name,\r\n                        symbol,\r\n                        decimals,\r\n                        address: val,\r\n                        isAdd: true\r\n                    }\r\n                })\r\n            } catch (error) {\r\n                Tips(error)\r\n            }\r\n            \r\n        },\r\n        // 获取币种余额\r\n        async getBalance() {\r\n            if (!window.wallet.accounts[0]) {\r\n                for (let i = 0; i < this.getTokens.length; i++) {\r\n                    this.getTokens[i].balance = ''\r\n                }\r\n                return\r\n            }\r\n            let promise = []\r\n            for (let i = 0; i < this.getTokens.length; i++) {\r\n                const item = this.getTokens[i];\r\n                let balance\r\n                if (item.address === this.currentNetwork.MainCoin.address) {\r\n                    balance = window.wallet.provider.getBalance()\r\n                } else {\r\n                    const contract = window.wallet.initContract(item.address)\r\n                    balance = contract.balanceOf(window.wallet.accounts[0])\r\n                }\r\n                promise.push(balance)\r\n            }\r\n            Promise.allSettled(promise).then(data => {\r\n                data.forEach((item, index) => {\r\n                    const { status, value } = item\r\n                    if (status === 'fulfilled') {\r\n                        this.getTokens[index].balance = value\r\n                    } else {\r\n                        this.getTokens[index].balance = ''\r\n                    }\r\n                })\r\n            })\r\n        },\r\n\r\n        /**\r\n         * 导入新的币\r\n         * @param { boolean } add 是否需要加入到代币列表\r\n         */\r\n        importHandler(add = true) {\r\n            const item = this.tokens.find(item => {\r\n                return item.address === this.importTokens.address\r\n            })\r\n            if (!item && add) {\r\n                this.tokens.push(this.importTokens)\r\n                this.searchTxt = ''\r\n                localStorage.setItem(this.currentNetwork.ChainID+'tokens', JSON.stringify(this.tokens))\r\n            }\r\n            this.selectHandler(this.importTokens)\r\n        },\r\n        open(address) {\r\n            this.activeAddress = address\r\n            this.dialogVisible = true\r\n            this.importTokens = {}\r\n            this.getBalance()\r\n        },\r\n        selectHandler(data) {\r\n            this.$emit('change', data, this.type)\r\n            this.dialogVisible = false\r\n            this.importTokens = {}\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.tokens-list__import-name{\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #fff;\r\n}\r\n.tokens-list__import-desc{\r\n    font-size: 14px;\r\n    color: rgb(165, 165, 165);\r\n}\r\n.tokens-list__import-btn,.tokens-list__import-btn:hover{\r\n    background: #FCBE2F;\r\n    border: 1px solid #2A2A2A;\r\n    color: #fff;\r\n}\r\n    .tokens{\r\n        background: rgb(39, 38, 44);\r\n        border-radius: 32px;\r\n        max-height: 100vh;\r\n        max-width: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n\r\n        .el-dialog__close{\r\n            font-size: 20px;\r\n            font-weight: bold;\r\n        }\r\n        .el-dialog__title{\r\n            color: #FFF;\r\n        }\r\n        .el-dialog__header{\r\n            border-bottom: 1px solid #5d5d5d;\r\n        }\r\n        .el-dialog__body{\r\n            flex: 1;\r\n            height: 100%;\r\n            overflow: hidden;\r\n            padding: 0;\r\n        }\r\n        .tokens-content{\r\n            height: 100%;\r\n        }\r\n        .tokens-input{\r\n            background-color: rgb(55, 47, 71);\r\n            border-radius: 16px;\r\n            color: rgb(244, 238, 255);\r\n            display: block;\r\n            font-size: 16px;\r\n            height: 48px;\r\n            outline: 0px;\r\n            padding: 0px 16px;\r\n            width: calc(100% - 60px);\r\n            border: 1px solid rgb(38, 33, 48);\r\n            margin: 20px;\r\n        }\r\n        .tokens-list{\r\n            overflow: auto;\r\n            max-height: 400px;\r\n            &::-webkit-scrollbar {\r\n                width: 8px;\r\n            }\r\n            &::-webkit-scrollbar-thumb {\r\n                background: rgb(184, 173, 210);\r\n                border-radius: 8px;\r\n            }\r\n            &::-webkit-scrollbar-track {\r\n                border-radius: 10px;\r\n            }\r\n            .tokens-list__item{\r\n                padding: 20px 30px;\r\n                transition: all .3s;\r\n                &:hover{\r\n                    background: rgb(8, 6, 11);\r\n                }\r\n                &.is-disabled{\r\n                    background: #333;\r\n                    opacity: .5;\r\n                    cursor: not-allowed;\r\n                }\r\n            }\r\n            .tokens-list__item-icon{\r\n                width: 24px;\r\n                height: 24px;\r\n            }\r\n            .token-list__item-title{\r\n                color: #fff;\r\n                font-size: 16px;\r\n                font-weight: bold;\r\n            }\r\n            .token-list__item-desc{\r\n                color: #999;\r\n            }\r\n            .token-list__item-price{\r\n                font-size: 14px;\r\n                color: #fff;\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./tokens.vue?vue&type=template&id=35da9b56\"\nimport script from \"./tokens.vue?vue&type=script&lang=js\"\nexport * from \"./tokens.vue?vue&type=script&lang=js\"\n\nimport \"./tokens.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&lang=scss\"; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader-v16@16.0.0-beta.5.4@vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&lang=scss\""],"sourceRoot":""}